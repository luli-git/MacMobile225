if (self.CavalryLogger) { CavalryLogger.start_js(["++4vg"]); }

__d("SmartComposeTypeaheadHelperQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"queryParams",type:"AssistantSmartComposeParams!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"typeahead_list",storageKey:null,args:[{kind:"Variable",name:"query_params",variableName:"queryParams"}],concreteType:"AssistantSmartComposeCandidate",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"confidence",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"typeahead",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"SmartComposeTypeaheadHelperQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"SmartComposeTypeaheadHelperQuery",argumentDefinitions:a,selections:b},params:{operationKind:"query",name:"SmartComposeTypeaheadHelperQuery",id:"2326980770744887",text:null,metadata:{}}}}();e.exports=a}),null);
__d("XReactFiberErrorSymbolicateAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/react/symbolicate_error/",{error_stack:{type:"String",required:!0},client_revision:{type:"Int",required:!0}})}),null);
__d("StackUtils",["AsyncRequest","SiteData","XReactFiberErrorSymbolicateAsyncController"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.stackFrames.map(function(a){return a.text}).join("\n");return new(b("AsyncRequest"))().setURI(b("XReactFiberErrorSymbolicateAsyncController").getURIBuilder().setString("error_stack",a).setInt("client_revision",b("SiteData").client_revision).getURI()).setMethod("GET").setReadOnly(!0).exec().then(function(a){return a.payload.symbolicated_stack})}e.exports={symbolicateStack:a}}),null);
__d("ReactFiberErrorDialogBlue",["regeneratorRuntime","ErrorNormalizeUtils","React","ReactFiberErrorLoggerConfig","SimpleXUIDialog","SiteData","StackUtils","XUIButton.react","XUIDialogButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.map(function(a,c){return b("React").jsx("div",{style:k,children:n(a)},c)})}function h(){var a=window.location,b=a.href;a=a.search;return""+b+(a?"&":"?")+"js_debug=1&__DEV__=1"}function i(a,c){__p&&__p();var d=a.name+": "+a.message;a=a.stackFrames;var e=[];c?e=c.map(function(a){var c=a.name;a.phabricator_url!=null&&(c=b("React").jsx("a",{href:a.phabricator_url,style:l,children:c},"link"));return["    at ",c]}):a&&(e=a.map(function(a){return String(a.text)}));e.unshift(d);return e}var j={color:"#fa3e3e",fontSize:"0.75em",lineHeight:"normal",maxHeight:300,overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word"},k={marginBottom:4},l={color:"inherit",textDecoration:"underline"},m=/https?:\/\/reactjs.org\/[^\s]*/;function n(a){if(typeof a!=="string")return a;var c=a.match(m);if(c==null||c.length!==1)return a;var d=c[0];c=c.index;return b("React").jsxs(b("React").Fragment,{children:[a.substring(0,c),b("React").jsx("a",{href:d,target:"_blank",children:d}),a.substring(c+d.length)]})}var o=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.capturedError,d=a.normalizedError;a=a.symbolicated;var e=c.componentStack;c=c.errorBoundaryName;var f=b("SiteData").push_phase==="dev";d=i(d,a);a=e.replace(/^\n|\n$/g,"").split("\n");e="";c!=null?e=b("React").jsxs("span",{children:["An error occurred in one of the components on this page and was caught by ",b("React").jsxs("code",{children:["$",c]}),"."]}):e="An error occurred in one of the components on this page.";if(f)c=b("React").jsx("p",{children:e});else{c=(f=b("React")).jsxs(f.Fragment,{children:[f.jsx("p",{children:e}),f.jsx("p",{children:"You can help improve the quality of Facebook by reporting this bug. When reporting, please take a moment to explain what you were doing when the bug happened."})]})}e=b("React").jsxs("p",{children:["For a more detailed component stack, use your sandbox or reload this page with"," ",b("React").jsx("a",{href:h(),target:"_blank",children:"?js_debug=1&__DEV__=1"}),"."]});return b("React").jsxs("div",{children:[c,b("React").jsx("h1",{children:"Call Stack"}),b("React").jsx("pre",{style:j,children:g(d)}),b("React").jsx("h1",{children:"Component Stack"}),b("React").jsx("pre",{style:j,children:g(a)}),e]})};return a}(b("React").Component),p=!1;a={showReactErrorDialog:function(a){__p&&__p();var c,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:if(!p){j.next=2;break}return j.abrupt("return");case 2:p=!0;c=b("ErrorNormalizeUtils").normalizeError(a.error);j.next=6;return b("regeneratorRuntime").awrap(b("StackUtils").symbolicateStack(c)["catch"](function(a){return null}));case 6:d=j.sent,e=b("React").jsx(o,{capturedError:a,normalizedError:c,symbolicated:d}),f=b("ReactFiberErrorLoggerConfig").bugNubClickTargetClassName,g=f!=null?document.getElementsByClassName(f):null,g!==null&&g.length>0?h=b("React").jsx(b("XUIButton.react"),{rel:"dialog",use:"confirm",label:"Report Error",onClick:function(){g[g.length-1].click()}}):h=b("React").jsx(b("XUIDialogButton.react"),{action:"button",ajaxify:"/ajax/bugs/employee_report?source=bug_nub",rel:"dialog",use:"confirm",label:"Report Error"}),i=b("React").jsxs("div",{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"cancel",label:"Dismiss",use:"default"}),h]}),b("SimpleXUIDialog").showEx(e,"[fb-only] Uncaught JavaScript Error",i,function(){p=!1},{width:900});case 13:case"end":return j.stop()}},null,this)}};e.exports=a}),null);
__d("CancelablePromise",["Promise","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$1=new(b("Promise"))(function(d,e){b("promiseDone")(a.then(function(a){return c.$2?e({isCanceled:!0}):d(a)})["catch"](function(a){return c.$2?e({isCanceled:!0}):e(a)}))});this.$2=!1}var c=a.prototype;c.getPromise=function(){return this.$1};c.cancel=function(){this.$2=!0};return a}();e.exports=a}),null);
__d("SmartComposeSuggestionClickedFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("smart_compose_suggestion_clicked");e.exports=a}),null);
__d("SmartComposeSuggestionDisplayedFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("smart_compose_suggestion_displayed");e.exports=a}),null);
__d("SmartComposeTypeaheadHelper",["CancelablePromise","React","RelayModern","SmartComposeCandidatesGeneratedFalcoEvent","SmartComposeSuggestionClickedFalcoEvent","SmartComposeSuggestionDisplayedFalcoEvent","promiseDone","stylex","SmartComposeTypeaheadHelperQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").fetchQuery;b("RelayModern").graphql;var h=function(){return b("SmartComposeTypeaheadHelperQuery.graphql")};a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.$1=null;this.$2="";this.$3="";this.$4="";this.$5="";this.$6=null;this.$7=new Set();this.$8=[];this.$11=null;this.$13={end:0,start:0};this.$9=a;this.$12=c;this.$10=d;this.$14={component:function(a){var c=e.getSuggestion();return b("React").jsxs(b("React").Fragment,{children:[a.children,c.length>0&&b("React").jsx("span",{className:"ll82wnt6 g3x53x41",children:c})]})},strategy:function(a,b,c){a=e.$5.length;b(a-1,a)}}}var c=a.prototype;c.setEnteredText=function(a){a!==this.$5&&(this.$4=this.$5,this.$5=a,this.$15(),this.$16());return this};c.setCursorPosition=function(a,b){(this.$13.start!==a||this.$13.end!==b)&&(this.$13={end:b,start:a},this.$15());return this};c.getSuggestion=function(){var a;return(a=(a=this.$6)==null?void 0:a.filteredText)!=null?a:""};c.isCursorAtEnd=function(){var a=this.$13,b=a.start;a=a.end;return b===a&&b===this.$5.length};c.isDeleting=function(){return this.$5.length<this.$4.length};c.getDraftDecorator=function(){return this.$14};c.onSuggestionChange=function(a){var b=this;this.$11=a;return{cancel:function(){b.$11=null}}};c.logSuggestionInserted=function(){var a=this,c=this.$6;if(c==null)return;b("SmartComposeSuggestionClickedFalcoEvent").log(function(){return{complete_text:c.candidate.text,confidence:c.candidate.confidence,message_body:a.$5,processing_time:c.candidate.processingTime,suggestion_text:c.filteredText,surface:a.$9}})};c.reset=function(){this.$1&&this.$1.cancel(),this.$1=null,this.$11=null};c.$15=function(){var a,b=this.$17();if((b==null?void 0:b.filteredText)!==((a=this.$6)==null?void 0:a.filteredText)){this.$6=b;this.$11&&this.$11((a=b==null?void 0:b.filteredText)!=null?a:"")}};c.$17=function(a){__p&&__p();var c=this;a=a||this.$8;if(a.length===0||this.$5.indexOf(this.$3)<0||this.isDeleting()||!this.isCursorAtEnd())return null;var d=this.$5.substring(this.$3.length,this.$5.length).toLowerCase();if(d.length===0)return null;var e=a.find(function(a){return a.text.toLowerCase().indexOf(d)===0});if(e==null||e.text.length<=d.length)return null;var f={candidate:babelHelpers["extends"]({},e),filteredText:e.text.substring(d.length,e.text.length)};this.$7.has(e.text)||(this.$7.add(e.text),b("SmartComposeSuggestionDisplayedFalcoEvent").log(function(){return{complete_text:e.text,confidence:e.confidence,message_body:c.$5,processing_time:e.processingTime,suggestion_text:f.filteredText,surface:c.$9}}));return f};c.$16=function(){__p&&__p();var a=this;if(this.$5.trim()===""||!/[^\s]+\s$/.test(this.$5)||this.$2===this.$5||this.$3===this.$5||this.$5.length<this.$4.length||this.$6!=null)return;var c=Date.now();this.$2=this.$5;this.$1&&this.$1.cancel();this.$1=new(b("CancelablePromise"))(g(this.$12,h,{queryParams:{feedback_id:this.$10,surface:this.$9,text:this.$5}}));b("promiseDone")(this.$1.getPromise(),function(d){var e=Date.now()-c,f=(d.typeahead_list&&d.typeahead_list.length>0?d.typeahead_list:[]).map(function(a){return{confidence:Math.round(1e4*a.confidence),processingTime:e,text:a.typeahead}});f.length>0&&(a.$6==null||a.$17(f)!=null)&&(a.$3=a.$2,a.$8=f,b("SmartComposeCandidatesGeneratedFalcoEvent").log(function(){return{candidates_blob:JSON.stringify(f),message_body:a.$3,processing_time:e,surface:a.$9}}),a.$15())},function(a){})};return a}();e.exports=a}),null);
__d("createUFI2SmartComposeTypeaheadComposerPlugin",["DraftModifier","EditorState","Keys","React","SelectionState","SmartComposeTypeaheadHelper","createUFI2ComposerPlugin","installUFI2ComposerInputDecorators"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.environment,d=a.ftentidentifier;a=a.surface;var e=new(b("SmartComposeTypeaheadHelper"))(a,c,d);return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){__p&&__p();var a,c;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(a=c=d.call.apply(d,[this].concat(g))||this,c.state={typeahead:""},c.handleKeypress=function(a){if(c.state.typeahead.length>0&&e.isCursorAtEnd())switch(a.keyCode){case b("Keys").RIGHT:case b("Keys").TAB:c.commitTypeahead();a.preventDefault();break}return c.props.inputProps.keyBindingFn&&c.props.inputProps.keyBindingFn(a)},a)||babelHelpers.assertThisInitialized(c)}var f=c.prototype;f.render=function(){e.setEnteredText(this.getEnteredText());var c=this.getCursorPosition(),d=c.end;c=c.start;e.setCursorPosition(c,d);return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(this.props.inputProps.composerState,e.getDraftDecorator()),keyBindingFn:this.handleKeypress})}))};f.componentDidMount=function(){var a=this;e.onSuggestionChange(function(b){return a.setState({typeahead:b})})};f.componentWillUnmount=function(){e.reset()};f.commitTypeahead=function(){__p&&__p();var a=this,c=this.state.typeahead;if(c.length===0)return;e.logSuggestionInserted();this.props.inputProps.onComposerStateChange(function(d){var e=d.inputState;if(e.__type!=="editor-state-based")return d;var f=e.editorState,g=f.getCurrentContent(),h=f.getSelection(),i=a.getEnteredText().length+c.length;i=new(b("SelectionState"))({anchorKey:h.getAnchorKey(),anchorOffset:i,focusKey:h.getFocusKey(),focusOffset:i,hasFocus:!0,isBackward:!1});return babelHelpers["extends"]({},d,{inputState:babelHelpers["extends"]({},e,{editorState:b("EditorState").forceSelection(b("EditorState").push(f,b("DraftModifier").insertText(g,h,c),"insert-fragment"),i)})})})};f.getCursorPosition=function(){__p&&__p();var a=this.props.inputProps.composerState.inputState,b;if(a.__type==="editor-state-based"){var c=a.editorState.getSelection();b=c.getStartOffset();c=c.getEndOffset()}else{var d;b=((d=a.selectionOffsets)==null?void 0:d.start)||0;c=((d=a.selectionOffsets)==null?void 0:d.end)||0}return{end:c,start:b}};f.getEnteredText=function(){var a=this.props.inputProps.composerState.inputState;return a.__type==="editor-state-based"?a.editorState.getCurrentContent().getPlainText():a.text};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);