if (self.CavalryLogger) { CavalryLogger.start_js(["OAUGk"]); }

__d("getWorkplaceUFI2ComposerPlugins_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},b=[a];return{kind:"Fragment",name:"getWorkplaceUFI2ComposerPlugins_feedback",type:"Feedback",metadata:{mask:!1},argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor",type:"Boolean"}],selections:[{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_gif",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_file",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_photo",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_video",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_sticker",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_insight_point",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_bot_mention",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_comment_with_marker",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_comment_markdown_eligible",args:null,storageKey:null},a,{kind:"LinkedField",alias:null,name:"viewer_actor",storageKey:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:null,plural:!1,selections:b},{kind:"ScalarField",alias:null,name:"composer_tip",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"mentions_datasource_js_constructor_args_json",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owning_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:b},{kind:"LinkedField",alias:null,name:"people_outside_community_in_comment_notice",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]}]}}();e.exports=a}),null);
__d("getWorkplaceUFI2ComposerPlugins_group.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"getWorkplaceUFI2ComposerPlugins_group",type:"Group",metadata:{mask:!1},argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"group_mentions_sections_info",storageKey:null,args:null,concreteType:"GroupMentionsSectionsInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"member_title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"member_aux",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nonmember_title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nonmember_aux",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"bot_title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"bot_aux",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("UFI2InsertBotsComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2MentionBotButton.react").__setRef("UFI2InsertBotsComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=h._("Discover the Bots available");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _7a_3",groupID:a.props.groupID,iconActiveClassName:"UFICommentBotsIconActive",iconClassName:"InsertBot",initiallyVisible:b,label:c,onComposerStateChange:a.props.onComposerStateChange}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _7a_3",iconClassName:"InsertBot",label:c}),resource:i})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("createUFI2BotComposerPlugin",["React","UFI2InsertBotsComposerAction.react","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();return function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2InsertBotsComposerAction.react"),{groupID:a.groupID,onComposerStateChange:this.props.inputProps.onComposerStateChange},"botComposerAction")])}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)}}e.exports=a}),null);
__d("UFI2FileUploadComposerAction.react",["cx","fbt","Event","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","UFICommentFileInputAcceptValues","injectSubscriptionsHandler.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2FileUploadButton.react").__setRef("UFI2FileUploadComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var b=a.target.files.item(0);d.props.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{attachment:{__type:"Media",reference:{__type:"File",file:b}}})})},d.$2=function(a){a=document.createElement("input");a.setAttribute("accept",b("UFICommentFileInputAcceptValues").both);a.setAttribute("type","file");d.props.subscriptionsHandler.addSubscriptions(b("Event").listen(a,"change",d.$1));a.click()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=this.props.allowFileAttachment?(this.props.fileIsHoveringOverDropTarget?"_7cn1":"")+(!this.props.fileIsHoveringOverDropTarget&&!this.props.hasErrored?" _7cn2":"")+(this.props.hasErrored?" _7cn3":""):(this.props.fileIsHoveringOverDropTarget?"_3n42":"")+(!this.props.fileIsHoveringOverDropTarget&&!this.props.hasErrored?" _3n43":"")+(this.props.hasErrored?" _3nb4":""),d=this.props.hasErrored?h._("There was a problem attaching the file, please try again"):this.props.allowFileAttachment?h._("Attach a File"):h._("Attach a photo or video");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b.clicked;return{allowFileAttachment:a.props.allowFileAttachment,fileIsHoveringOverDropTarget:a.props.fileIsHoveringOverDropTarget,hasErrored:a.props.hasErrored,label:d,onComposerStateChange:a.props.onComposerStateChange}},label:d,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _7jfb",iconClassName:c,label:d,onMouseUp:this.$2}),resource:i})};return c}(b("React").Component);a.defaultProps={allowFileAttachment:!1,fileIsHoveringOverDropTarget:!1,hasErrored:!1};e.exports=b("injectSubscriptionsHandler.react")(a)}),null);
__d("isMimeTypeForFile",["UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UFICommentFileInputAcceptValues").files,h=b("UFICommentFileInputAcceptValues").photos,i=b("UFICommentFileInputAcceptValues").videos,j={"image/gif":"video"},k,l,m;function n(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function a(a){l==null&&(l=n(h));var b=j[a];return b!=null?b==="photo":l.some(function(b){return a.startsWith(b)})}function c(a){k==null&&(k=n(i));var b=j[a];return b!=null?b==="video":k.some(function(b){return a.startsWith(b)})}function d(a){m==null&&(m=n(g));var b=j[a];return b!=null?b==="file":m.some(function(b){return a.startsWith(b)})}e.exports={isMimeTypeForFile:d,isMimeTypeForPhoto:a,isMimeTypeForVideo:c}}),null);
__d("mimeTypeIsAcceptableToUFI2FileUploadPlugin",["isMimeTypeForFile"],(function(a,b,c,d,e,f){"use strict";var g=b("isMimeTypeForFile").isMimeTypeForFile,h=b("isMimeTypeForFile").isMimeTypeForPhoto,i=b("isMimeTypeForFile").isMimeTypeForVideo;function a(a){return h(a)||i(a)||g(a)}e.exports=a}),null);
__d("createUFI2FileUploadComposerPlugin",["cx","fbt","Bootloader","ProgressBar.react","React","UFI2ComposerPreviewArea.react","UFI2FileUploadComposerAction.react","createUFI2ComposerPlugin","ifRequired","indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin","injectSubscriptionsHandler.react","mimeTypeIsAcceptableToUFI2FileUploadPlugin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,b){a.inputProps.onComposerStateChange(function(a){return{attachment:{__type:"Media",reference:{__type:"File",file:b}}}})}function j(a){return((a=a.attachment)==null?void 0:a.__type)==="Media"}function k(a,b,c){if(b==="ufi-commit"){var d=a.inputProps.composerState;d=d&&d.attachment&&d.attachment.__type==="Media"&&d.attachment.reference.__type;if(d==="File"||d==="UploadingFile")return"handled"}return a.inputProps.handleKeyCommand?a.inputProps.handleKeyCommand(b,c):"not-handled"}function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){__p&&__p();var c,d;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=0,d.$2=!1,d.state={fileIsHoveringOverDropTarget:!1,upgradedPlugin:b("ifRequired")("getUpgradedUFI2FileUploadComposerPlugin",function(b){return b(a)},function(){return null}),uploadError:null},d.$4=function(a){d.$1++;var c=a.dataTransfer;if(c==null)return;b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c)!==-1&&(a.preventDefault(),d.$1>0&&d.setState({fileIsHoveringOverDropTarget:!0}))},d.$5=function(a){d.$1--,d.$1===0&&d.setState({fileIsHoveringOverDropTarget:!1})},d.$7=function(a){var b=a.dataTransfer;b!=null&&d.$3(a,b);d.$1=0;d.setState({fileIsHoveringOverDropTarget:!1})},d.$8=function(a){if(a.isDefaultPrevented())return;var b=a.clipboardData;if(b==null)return;d.$3(a,b)},d.$9=function(a){a=a.find(function(a){return b("mimeTypeIsAcceptableToUFI2FileUploadPlugin")(a.type)});if(a){i(d.props,new Blob([a],{type:a.type}));return"handled"}return"not-handled"},d.$10=function(a){d.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.$3=function(a,c){if(c==null)return;var d=b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c);if(d===-1)return;c=Array.from(c.items);c=d<c.length?c[d].getAsFile():null;c!=null&&(a.preventDefault(),i(this.props,c))};f.$6=function(a){var c=a.dataTransfer;if(c==null)return;b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c)!==-1&&a.preventDefault()};f.$11=function(){var c=this;if(this.state.upgradedPlugin||this.$2)return;this.$2=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2FileUploadComposerPlugin"],function(b){c.setState({upgradedPlugin:b(a)})},"createUFI2FileUploadComposerPlugin"))};f.componentDidMount=function(){this.state.upgradedPlugin?this.state.upgradedPlugin.installPlugin(this.props,this.state,this.setState.bind(this)):this.$12()&&this.$11()};f.$12=function(){if(this.state.upgradedPlugin||this.$2)return!1;var a=this.props.inputProps.composerState;return a.attachment!=null&&a.attachment.__type==="Media"};f.componentDidUpdate=function(a,b){b.upgradedPlugin==null&&this.state.upgradedPlugin!=null&&this.state.upgradedPlugin.installPlugin(this.props,this.state,this.setState.bind(this)),this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidUpdate(a,this.props,this.state,this.setState.bind(this)):this.$12()&&this.$11()};f.render=function(){var d=this;if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,this.state,this.setState.bind(this),this.$4,this.$5,this.$6,this.$7,k,this.$8,this.$9,c);var e=j(this.props.inputProps.composerState),f=b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:this.props.inputProps.composerState.attachment?this.props.actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2FileUploadComposerAction.react"),{allowFileAttachment:a.allowFileUpload,fileIsHoveringOverDropTarget:this.state.fileIsHoveringOverDropTarget,hasErrored:!1,onComposerStateChange:this.props.inputProps.onComposerStateChange},"mediaUploadComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{handleKeyCommand:function(a,b){return k(d.props,a,b)},handlePastedFiles:this.$9})})),g=h._("Cancel upload");return b("React").jsxs("div",{className:"_25-w",onDragEnter:this.$4,onDragLeave:this.$5,onDragOver:this.$6,onDrop:this.$7,children:[f,e?b("React").jsx(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$10,removeButtonLabel:g,children:b("React").jsx(b("ProgressBar.react"),{label:h._("{value}\u0025",[h._param("value","0")]),value:0})}):null]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("WorkFilePDFViewEvents",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({PAGE_CHANGE:"PAGE_CHANGE",SELECTED_MARKER:"SELECTED_MARKER",MARKER_CLICK:"MARKER_CLICK",NEW_COMMENT:"NEW_COMMENT",NEW_MARKER_CLOSE_BUTTON_CLICKED:"NEW_MARKER_CLOSE_BUTTON_CLICKED"});e.exports=a}),null);
__d("WorkFilePDFViewerLoggerUtils",["CurrentUser","WebFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={createLogger:function(){return new(b("WebFunnelLogger"))("WorkFilePDFViewerFunnelDefinition").setSessionKey(b("CurrentUser").getID())},startLog:function(a){var b=Object.keys(a).reduce(function(b,c){return b.addFunnelPayload(c,a[c])},g.createLogger().setAction("VIEWER_OPENED"));b.markStart().log()},endLog:function(a){g.createLogger().setAction(a).markEnd().log()},log:function(a,b,c){a=g.createLogger().setAction(a);if(b!=null)for(var d in b)a.addActionPayload(d,b[d]);if(c!=null)for(var e in c)a.addFunnelPayload(e,c[e]);a.log()}};e.exports=g}),null);
__d("createUFI2FileViewerComposerPlugin",["fbt","Arbiter","React","SubscriptionsHandler","WorkFilePDFViewerLoggerUtils","WorkFilePDFViewEvents","createUFI2ComposerPlugin","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){__p&&__p();var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=d.call.apply(d,[this].concat(f))||this,c.$1=new(b("SubscriptionsHandler"))(),c.state={pageNumber:null},c.$2=function(a,b){c.props.inputProps.onComposerStateChange(function(a){c.setState({pageNumber:b.page});return{fileMarker:b}})},c.$3=function(a,b){if(c.props.inputProps.depth!==0)return;c.props.inputProps.onComposerStateChange(function(a){return{fileMarker:b}})},c.$4=function(){c.props.inputProps.onCommit();var a=c.props.inputProps.composerState.fileMarker,d={};a==null&&(d.isReply=!0);(a==null?void 0:a.page)!=null&&(d.pageIndex=b("nullthrows")(a==null?void 0:a.page)-1);(a==null?void 0:a.location)!=null&&(d.isMarker=!0);b("WorkFilePDFViewerLoggerUtils").log("ADD_COMMENT",d)},a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.componentDidMount=function(){if(this.props.inputProps.depth!==0)return;this.$1.addSubscriptions(b("Arbiter").subscribe(b("WorkFilePDFViewEvents").PAGE_CHANGE,this.$2),b("Arbiter").subscribe(b("WorkFilePDFViewEvents").SELECTED_MARKER,this.$3))};e.componentWillUnmount=function(){this.$1.release()};e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onCommit:this.$4,placeholder:this.state.pageNumber!=null&&this.props.inputProps.depth===0?g._("Page {Page number}: Write a comment",[g._param("Page number",this.state.pageNumber)]):this.props.inputProps.placeholder})}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("createUFI2InsightsPointComposerPlugin",["Arbiter","DOMScroll","React","ReactDOM","SubscriptionsHandler","UFI2LocalUserAction","clearTimeout","setFocusOnUFI2ComposerInputState","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();return function(a){__p&&__p();return function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=new(b("SubscriptionsHandler"))(),d.$2=null,d.state={insightsPoint:null},d.$3=function(a,c){__p&&__p();var e=c==null?void 0:c.selectedInsightPoint;d.setState({insightsPoint:e});if(e!=null){var f=b("setTimeoutAcrossTransitions")(function(){if(d.$2!=null){var a=b("ReactDOM").findDOMNode(d.$2);a instanceof Element&&b("DOMScroll").ensureVisible(a,null,null,null)}d.props.inputProps.onComposerStateChange(function(a){return b("setFocusOnUFI2ComposerInputState")(babelHelpers["extends"]({},a,{insightsPoint:JSON.stringify(e)}))})});d.$1.addSubscriptions({remove:function(){b("clearTimeout")(f)}})}},d.onBlur=function(a){b("Arbiter").inform("ufi/blur",{ftEntIdentifier:d.getDecodedFeedbackID()}),d.props.inputProps.onBlur&&d.props.inputProps.onBlur(a)},a)||babelHelpers.assertThisInitialized(d)}var e=d.prototype;e.getDecodedFeedbackID=function(){return atob(this.props.inputProps.composerState.feedbackID).split(":").pop()};e.componentDidMount=function(){this.$1.addSubscriptions(b("Arbiter").subscribe("InsightsComments/"+this.getDecodedFeedbackID()+"/selectedInsightsPoint/",this.$3))};e.componentWillUnmount=function(){this.$1.release()};e.render=function(){var c=this;return b("React").jsx("div",{ref:function(a){return c.$2=a},children:b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onBlur:this.onBlur,onCommit:function(){b("UFI2LocalUserAction").emit("commit",{feedbackID:c.getDecodedFeedbackID()}),c.props.inputProps.onCommit()},placeholder:this.state.insightsPoint?"Write a comment about ["+this.state.insightsPoint.formattedValue+"]:":this.props.inputProps.placeholder})}))})};return d}(b("React").Component)}}e.exports=a}),null);
__d("UFI2ToggleMarkdownComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2ToggleMarkdownButton.react").__setRef("UFI2ToggleMarkdownComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.formattingStyle,d=a.onComposerStateChange,e=a.onClick,f=h._("Format text with Markdown");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(a){a=a.clicked;return{buttonClassName:"_1t9_ _1qtn",formattingStyle:c,iconActiveClassName:"_15tt",iconClassName:"_15t_",initiallyEnabled:a,label:f,onClick:e,onComposerStateChange:d}},label:f,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1qtn",iconClassName:"_15t_",label:f}),resource:i})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("createUFI2MarkdownComposerPlugin",["cx","Bootloader","React","UFI2NUXConfig","UFI2ToggleMarkdownComposerAction.react","XUISpinner.react","createUFI2ComposerPlugin","getPlainTextFromUFI2InputState","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){var c,d;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=!1,d.state={NUXVisible:!1,sourceCodeToPreview:b("getPlainTextFromUFI2InputState")(d.props.inputProps.composerState.inputState),upgradedPlugin:b("ifRequired")("getUpgradedUFI2MarkdownComposerPlugin",function(b){return b(a)},function(){return null})},d.$2=function(a){h||(h=!0,d.setState({NUXVisible:!0})),d.props.inputProps.onFocus!=null&&d.props.inputProps.onFocus(a)},d.action=b("React").createRef(),d.$5=function(){d.setState({NUXVisible:!1})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.$3=function(){var c=this;if(this.state.upgradedPlugin||this.$1)return;this.$1=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2MarkdownComposerPlugin"],function(b){c.setState({upgradedPlugin:b(a)})},"createUFI2MarkdownComposerPlugin"))};f.componentDidMount=function(){this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidMount(this.props):this.$4()&&this.$3()};f.$4=function(){if(this.state.upgradedPlugin||this.$1)return!1;var a=this.props.inputProps.composerState;return a.formattingStyle==="MARKDOWN"};f.componentDidUpdate=function(a,b){this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidUpdate(this.props,this.state,this.setState.bind(this)):this.$4()&&this.$3()};f.render=function(){var d=this;if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,this.state,this.setState.bind(this),a.topLevelFeedbackTargetID,c);var e=this.props.inputProps.composerState.formattingStyle,f=this.state.NUXVisible,g=b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2ToggleMarkdownComposerAction.react"),{formattingStyle:e,onClick:this.$5,onComposerStateChange:this.props.inputProps.onComposerStateChange,ref:this.action},"markdownComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{onFocus:this.$2})}));return b("React").jsxs("div",{className:"_21qf",children:[g,this.state.sourceCodeToPreview&&e==="MARKDOWN"?b("React").jsx("div",{className:"_21qj",children:b("React").jsx(b("XUISpinner.react"),{className:"_691k",size:"large"})}):null,f&&b("UFI2NUXConfig").UFI2MarkdownNUX?b("React").jsx(b("UFI2NUXConfig").UFI2MarkdownNUX,{contextRef:function(){return d.action.current},onClose:this.$5}):null]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("UFI2SubmitComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2SubmitButton.react").__setRef("UFI2SubmitComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.onComposerStateChange,d=a.onClick,e=a.isActive;a=a.shortcutKeys;a=h._("Add your comment. You can also do this by pressing {keyboard keys} on your keyboard. To add an extra line to your comment, press Enter on your keyboard.",[h._param("keyboard keys",a)]);var f=e?"_79l6":"_79l7";return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(a){a.clicked;return{buttonClassName:"_1t9_ _79l8",iconClassName:f,onClick:d,onComposerStateChange:c}},label:a,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _79l8",iconClassName:f,label:a}),resource:i})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("createUFI2SubmitComposerPlugin",["cx","fbt","KeyBindingUtil","Keys","React","UFI2NUXConfig","UFI2SubmitComposerAction.react","UserAgent","createUFI2ComposerPlugin","getDefaultKeyBinding","isUFI2ComposerStateEmpty"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Keys").RETURN,j=6653,k=b("UserAgent").isPlatform("Mac OS X");function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){__p&&__p();var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=d.call.apply(d,[this].concat(f))||this,c.$1=function(){c.props.inputProps.onCommit()},c.$2=function(a){__p&&__p();if(c.props.inputProps.keyBindingFn){var d=c.props.inputProps.keyBindingFn(a);if(d!=null)return d}if(a.keyCode===i)if(b("KeyBindingUtil").hasCommandModifier(a))return"ufi-commit";else return b("getDefaultKeyBinding")(a);return null},c.$3=b("React").createRef(),a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.render=function(){var c=this,d=!b("isUFI2ComposerStateEmpty")(this.props.inputProps.composerState),e=k?"Cmd+Enter":"Ctrl+Enter",f=b("React").jsx(a,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2SubmitComposerAction.react"),{isActive:d,onClick:this.$1,onComposerStateChange:this.props.inputProps.onComposerStateChange,ref:this.$3,shortcutKeys:e},"sumbitComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{keyBindingFn:this.$2})}));return b("React").jsxs("div",{className:"_79l8",children:[f,d&&b("UFI2NUXConfig").UFI2SubmitNUX?b("React").jsxs(b("UFI2NUXConfig").UFI2SubmitNUX,{contextRef:function(){return c.$3.current},nuxID:j,shouldShow:d,children:[h._("To add your comment, you now need to click Send or press {keyboard keys} on your keyboard.",[h._param("keyboard keys",e)]),b("React").jsx("br",{}),h._("To add an extra line to your comment, press Enter on your keyboard.")]}):null]})};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("UFI2UnifiedInputComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2UnifiedInputButton.react").__setRef("UFI2UnifiedInputComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=h._("Post stickers, emojis and GIFs");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _1ta3",config:a.props.config,iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"InsertEmoji",initiallyVisible:b,label:c,onComposerStateChange:a.props.onComposerStateChange}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1ta3",iconClassName:"InsertEmoji",label:c}),resource:i})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("createUFI2UnifiedInputComposerPlugin",["React","UFI2UnifiedInputComposerAction.react","createUFI2ComposerPlugin","createUFI2EmojiComposerActionComponentPlugin","createUFI2GIFComposerActionComposerPlugin","createUFI2StickersComposerActionComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2UnifiedInputComposerAction.react"),{config:a,onComposerStateChange:this.props.inputProps.onComposerStateChange},"unifiedInputComposerAction")])}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)};return[c,b("createUFI2EmojiComposerActionComponentPlugin")({size:16}),b("createUFI2GIFComposerActionComposerPlugin")(),b("createUFI2StickersComposerActionComposerPlugin")({environment:a.environment,targetID:a.targetID})]}e.exports=a}),null);
__d("getWorkplaceUFI2ComposerPlugins",["requireCond","JSResource","RelayModern","UFI2Config","createUFI2AssociateReplyWithParentComposerPlugin","createUFI2BotComposerPlugin","createUFI2ComposerTipPlugin","createUFI2EmoticonsComposerPlugin","createUFI2FileUploadComposerPlugin","createUFI2FileViewerComposerPlugin","createUFI2HashtagComposerPlugin","createUFI2InsightsPointComposerPlugin","createUFI2LiveTypingBroadcastComposerPlugin","createUFI2MarkdownComposerPlugin","createUFI2MentionsComposerPlugin","createUFI2PrefillMentionComposerPlugin","createUFI2SetReplyClickedComposerPlugin","cr:1101374","createUFI2SubmitComposerPlugin","createUFI2UnifiedInputComposerPlugin","cr:1185028","gkx","qex","getWorkplaceUFI2ComposerPlugins_feedback.graphql","getWorkplaceUFI2ComposerPlugins_group.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("RelayModern").graphql;(function(){return b("getWorkplaceUFI2ComposerPlugins_feedback.graphql")});(function(){return b("getWorkplaceUFI2ComposerPlugins_group.graphql")});function a(a){__p&&__p();var c,d=a.environment,e=a.feedback,f=a.group;a.pluginsToInsertBeforePositions;a=a.feedbackTargetID;var g=e.viewer_actor,h=e.mentions_datasource_js_constructor_args_json;return[e.can_viewer_comment_with_marker===!0?b("createUFI2FileViewerComposerPlugin")({}):null,e.composer_tip!=null?b("createUFI2ComposerTipPlugin")({composer_tip:e.composer_tip}):null,b("cr:1185028")&&b("UFI2Config").shouldShowWritingHelp?b("cr:1185028")({defaultInterfaceType:"inline_composer",isAutoEnabled:!0}):null,f!=null?b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:h,typeaheadViewProps:{__type:"GroupMentions",sortFn:function(a,c){__p&&__p();var d,e=a.getAuxiliaryData().renderType,f=c.getAuxiliaryData().renderType;d=(d=b("qex")._("1083132"))!=null?d:!1;if(e===f||d){d=a.getAuxiliaryData().indexRank;var g=c.getAuxiliaryData().indexRank;if(d===-1&&g!==-1)return-1;else if(d!==-1&&g===-1)return 1;else return a.getOrder()-c.getOrder()}d={bot:1,member:0,non_member:2,place:3};return d[e]-d[f]},viewProps:{bot:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_title:c:c},member:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_title:c:c},nonMember:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_title:c:c}}},upgradedPluginResource:b("JSResource")("createUpgradedUFI2GroupMentionsComposerPlugin").__setRef("getWorkplaceUFI2ComposerPlugins")}):b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:h,typeaheadViewProps:{},upgradedPluginResource:b("JSResource")("createUpgradedUFI2MentionsComposerPlugin").__setRef("getWorkplaceUFI2ComposerPlugins")}),b("createUFI2HashtagComposerPlugin")(),e.can_viewer_comment_with_bot_mention===!0&&f!=null&&f.id!=null?b("createUFI2BotComposerPlugin")({groupID:f.id}):null,b("createUFI2EmoticonsComposerPlugin")({size:16}),e.is_comment_markdown_eligible===!0&&a!=null?b("createUFI2MarkdownComposerPlugin")({topLevelFeedbackTargetID:a}):null,e.can_viewer_comment_with_photo===!0&&e.can_viewer_comment_with_video===!0?b("createUFI2FileUploadComposerPlugin")({allowFileUpload:e.can_viewer_comment_with_file===!0,feedback:{viewer_actor:g}}):null,e.can_viewer_comment_with_insight_point===!0?b("createUFI2InsightsPointComposerPlugin")():null,b("createUFI2LiveTypingBroadcastComposerPlugin")({feedback:e,relayEnvironment:d}),b("createUFI2PrefillMentionComposerPlugin")(),b("createUFI2AssociateReplyWithParentComposerPlugin")(),b("createUFI2SetReplyClickedComposerPlugin")(),b("gkx")("779036")?b("createUFI2SubmitComposerPlugin")():null].concat(b("createUFI2UnifiedInputComposerPlugin")({allowGifAttachments:(c=e.can_viewer_comment_with_gif)!=null?c:!1,allowStickerAttachments:(h=e.can_viewer_comment_with_sticker)!=null?h:!1,environment:d,targetID:(f=e)!=null?(f=f.owning_profile)!=null?f.id:f:f}),[b("cr:1101374")!=null?b("cr:1101374")({environment:d,ftentidentifier:e==null?void 0:e.id,surface:"workplace_comment_www"}):null]).filter(Boolean)}e.exports=a}),null);