if (self.CavalryLogger) { CavalryLogger.start_js(["vMvBZ"]); }

__d("AdsCanvasInlineBuilderPreviewCanvasDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"PREVIEW_CANVAS");e.exports=a}),null);
__d("AdsCanvasInlineTransformCanvasDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"ADS.CANVAS.INLINE.TRANSFORM_CANVAS");e.exports=a}),null);
__d("adsCanvasInlineBuilderActionBarSelector",["AdsCanvasCurrentCanvasIDStore","AdsCanvasInlineUIStore","AdsCanvasLeadFormElement","AdsLeadGenFormEditorViewStore","RichMediaEditorStore","adsCanvasAllDocumentElementsSelector","adsCanvasAllDocumentsSelector","adsCanvasBuilderLeadAdsToSSelector","adsCanvasDocumentProductSetIDSelector","adsCanvasHasElementUploadingSelector","adsCanvasLeadFormSelector","adsCanvasProductsElementTemplatePluginSelector","adsCreateSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){return a.map(function(a){return a.adgroup.id})},{name:e.id+".adgroupIDsSelector"});c=b("adsCreateSelector")([b("adsCanvasAllDocumentsSelector"),b("adsCanvasAllDocumentElementsSelector"),b("AdsCanvasInlineUIStore").getTemplateID,b("adsCanvasDocumentProductSetIDSelector"),b("adsCanvasProductsElementTemplatePluginSelector"),a,b("adsCanvasHasElementUploadingSelector"),b("AdsCanvasCurrentCanvasIDStore").getActiveCanvasIndex,b("RichMediaEditorStore").getDocumentEditState,b("RichMediaEditorStore").getError,b("RichMediaEditorStore").getSendingPreview,b("AdsLeadGenFormEditorViewStore").getOptionalFormID,b("adsCanvasLeadFormSelector"),b("AdsLeadGenFormEditorViewStore").getIsCanvasFormUnsaved,b("adsCanvasBuilderLeadAdsToSSelector")],function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=a.every(function(a){return a.hasValue()})&&c.flatten(!0).every(function(a){return a.hasValue()})&&f.hasValue();if(!q)return{isReady:!1};q=a.map(function(a){return a.getValueEnforcing()});a=c.map(function(a){return a.map(function(a){return a.getValueEnforcing()})});c=!1;var r=!1;a.map(function(a){return a.map(function(d){d instanceof b("AdsCanvasLeadFormElement")&&(c=!0,r=a.count()>1)})});return{activeCanvasIndex:i,adgroupIDs:g,allCanvases:q,allElements:a,canvasTemplateID:d,documentEditState:j,error:k,hasElementUploading:h,isReady:!0,isRichForm:r,isSendingPreview:l,productSetID:e,templatePlugin:f.getValueEnforcing(),leadGenFormID:c?m:null,leadGenForm:c?n:null,isCanvasLeadFormUnsaved:o,isLeadGenTosAccepted:p}},{name:e.id});e.exports=c}),null);
__d("adsCanvasInlineBuilderSelector",["adsCanvasAllDocumentElementsSelector","adsCanvasAllDocumentsSelector","adsCanvasInlineBuilderShouldTransformInlineCanvas","adsCreateSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsCanvasAllDocumentsSelector"),b("adsCanvasAllDocumentElementsSelector")],function(a,c){__p&&__p();var d=a.every(function(a){return a.hasValue()})&&c.flatten(!0).every(function(a){return a.hasValue()});if(!d)return{areCanvasesLoaded:!1,areCanvasReady:!1};d=a.map(function(a){return a.getValueEnforcing()});var e=c.map(function(a){return a.map(function(a){return a.getValueEnforcing()})});if(d.some(function(a){return!!a.dynamicSetting}))return{allCanvases:d,hasCanvasDynamic:!0};return d.some(function(a,c){return b("adsCanvasInlineBuilderShouldTransformInlineCanvas")(a,e.get(c))})?{allCanvases:d,allElements:e,areCanvasesLoaded:!0,areCanvasReady:!1,hasCanvasDynamic:!1}:{areCanvasesLoaded:!0,areCanvasReady:!0,hasCanvasDynamic:!1}},{name:e.id});e.exports=a}),null);
__d("AdsCanvasInlineBuilderActionBar.react",["ix","cx","fbt","AdsFBIconDownsized.react","Image.react","LoadingIndicator.react","React","SUIButton.react","SUITooltip.react","asset","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("gkx")("677817")?null:b("React").jsx("div",{className:"_28r_",children:b("React").jsx(b("SUIButton.react"),{"data-testid":"ads-canvas-inline-builder-preview-button",disabled:this.props.hasLeadGenForm===!0||this.props.disabled||this.props.hasElementUploading,icon:b("React").jsx(b("AdsFBIconDownsized.react"),{src:g("407232")}),label:i._("Preview on Mobile"),ref:"inlineBuilderPreviewButton",tooltip:this.props.hasLeadGenForm===!0?this.props.isRichForm===!0?i._("This template doesn't support previews on mobile when it includes a contact form."):i._("This template doesn't support previews on mobile."):null,onClick:this.props.onClickPreview})});return b("React").jsxs("div",{className:"_28rz",children:[this.$1(),this.$2(),a,b("React").jsx(b("SUIButton.react"),{"data-testid":"ads-canvas-inline-builder-finish-button",disabled:this.props.disabled||this.props.hasElementUploading||this.props.hasLeadGenForm===!0&&!this.props.isLeadGenTosAccepted,label:this.$3()?i._("Saving..."):i._("Done"),tooltip:this.props.hasLeadGenForm===!0&&this.props.isLeadGenTosAccepted!==!0?i._("To use a form in an ad, your Page needs to accept the Lead Ads Terms of Service."):null,use:"confirm",onClick:this.props.onClickDone})]})};d.$3=function(){return this.props.disabled&&!(this.props.hasLeadGenForm===!0&&!this.props.isLeadGenTosAccepted)};d.$1=function(){return!this.$3()?null:b("React").jsx("div",{className:"_28r_",children:b("React").jsx(b("LoadingIndicator.react"),{color:"white","data-testid":"toolbar-loading-indicator",size:"medium"})})};d.$2=function(){var a=this.props.error;if(!a)return null;var c=g("380535");return b("React").jsx("div",{className:"_2lei",children:b("React").jsx(b("SUITooltip.react"),{tooltip:a.message,children:b("React").jsx(b("Image.react"),{src:c})})})};return c}(b("React").Component);e.exports=a}),null);
__d("AdsCanvasInlineBuilderActionBarContainer.react",["AdsCanvasBuilderUtils","AdsCanvasEditorEnums","AdsCanvasInlineBuilderActionBar.react","AdsCanvasInlineBuilderActions","AdsCanvasInlineBuilderPreviewCanvasDataAction","AdsCanvasInlineBuilderUtils","AdsFluxContainer","AdsLeadGenConstants","AdsLeadGenFormEditorFunnelLogger","AdsLeadGenFormEditorFunnelLoggerConstants","AdsUEditorContextType","AsyncRequest","React","RichMediaEditorActions","XMobileCanvasAdPreviewController","adsCanvasInlineBuilderActionBarSelector","emptyFunction","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasEditorEnums").SaveStateEnum;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){if(!d.state.isReady)return;d.state.canvasTemplateID===b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID&&b("AdsLeadGenFormEditorFunnelLogger").appendAction(b("AdsLeadGenFormEditorFunnelLoggerConstants").FUNNEL_LOGGING_EVENTS.CLICK_PUBLISH_FORM);d.$3(b("nullthrows")(d.context.onDoneSuccess),b("emptyFunction"));b("AdsCanvasInlineBuilderActions").inlineTemplateBuilderDone()},d.$2=function(){if(!d.state.isReady)return;d.$3(d.$4,b("emptyFunction"));b("AdsCanvasInlineBuilderActions").inlineTemplateBuilderMobilePreview()},d.$4=function(a,c){if(!a){b("RichMediaEditorActions").setPreviewFailed(!0);return}b("RichMediaEditorActions").setSendingPreview(!0);c=b("XMobileCanvasAdPreviewController").getURIBuilder().setString("node_id",a).setString("page_id",d.context.pageID).setBool("is_id_encoded",isNaN(a)).getURI();a=new(b("AsyncRequest"))().setURI(c).setHandler(function(a){b("AdsCanvasInlineBuilderPreviewCanvasDataAction").dispatch({},{line:"177",module:"AdsCanvasInlineBuilderActionBarContainer.react.js"})});a.send()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a,c){a=c.adgroupEditorContext;return b("adsCanvasInlineBuilderActionBarSelector").getStores(a)};c.calculateState=function(a,c,d){a=d.adgroupEditorContext;return b("adsCanvasInlineBuilderActionBarSelector")(a)};var d=c.prototype;d.render=function(){return!this.state.isReady?b("React").jsx(b("AdsCanvasInlineBuilderActionBar.react"),{disabled:!0,error:null,hasElementUploading:!1,ref:"inlineBuilderActionBar",onClickDone:this.$1,onClickPreview:this.$2}):b("React").jsx(b("AdsCanvasInlineBuilderActionBar.react"),{disabled:this.state.documentEditState===g.SAVING||this.state.isSendingPreview,error:this.state.error,hasElementUploading:this.state.hasElementUploading,hasLeadGenForm:this.state.leadGenFormID!=null,isLeadGenTosAccepted:this.state.isLeadGenTosAccepted,isRichForm:this.state.isRichForm,ref:"inlineBuilderActionBar",onClickDone:this.$1,onClickPreview:this.$2})};d.$3=function(a,c){if(!this.state.isReady)return;var d=this.state.productSetID!==null?this.state.productSetID:this.context.productSetID;this.state.allCanvases.count()>1?this.state.isReady&&b("AdsCanvasInlineBuilderUtils").saveAllCanvases(a,c,this.state.adgroupIDs,this.state.templatePlugin,this.state.allCanvases,this.state.allElements,d,this.context.pageID,this.context.adgroupEditorContext):this.state.isReady&&b("AdsCanvasInlineBuilderUtils").saveCurrentCanvas(a,c,this.state.activeCanvasIndex,this.state.adgroupIDs,this.state.allCanvases,this.state.allElements,this.state.documentEditState,this.state.templatePlugin,this.state.leadGenFormID,this.state.isCanvasLeadFormUnsaved,d,this.state.leadGenForm,this.context.pageID,this.context.adgroupEditorContext,!1)};return c}(b("React").PureComponent);a.contextTypes=babelHelpers["extends"]({},b("AdsCanvasBuilderUtils").getContextTypes(),b("AdsUEditorContextType").adgroup);e.exports=b("AdsFluxContainer").create(a,{withContext:!0,name:e.id})}),null);
__d("AdsCanvasInlineBuilderTour.react",["cx","AdsCanvasInlineBuilderActions","AdsCanvasInlineContent","ContextualLayerUpdateOnScroll","React","SimpleNUXMessage","SUIBusinessTheme","SUIText.react","Text.react","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={424787857903852:"BRAND",1063217037112304:"RETAIL",133471657203838:"ACQUISITION"},i={BRAND:{nuxName:"727232757449618",steps:(a=b("AdsCanvasInlineContent")).INLINE_CREATION_BRAND_RETAIL_TOUR_MAX_STEPS,tour:a.INLINE_CREATION_BRAND_RETAIL_TOUR},RETAIL:{nuxName:"727232757449618",steps:a.INLINE_CREATION_BRAND_RETAIL_TOUR_MAX_STEPS,tour:a.INLINE_CREATION_BRAND_RETAIL_TOUR},ACQUISITION:{nuxName:"175599466304273",steps:a.INLINE_CREATION_ACQUISITION_TOUR_MAX_STEPS,tour:a.INLINE_CREATION_ACQUISITION_TOUR}};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){b("AdsCanvasInlineBuilderActions").inlineBuilderNuxTourXout(d.state.currentStep,d.props.templateID),d.$4()};d.$2=function(){b("AdsCanvasInlineBuilderActions").inlineBuilderNuxTourComplete(d.state.currentStep,d.props.templateID),d.$4()};d.$3=function(){if(d.state.currentStep==null)return;d.setState({currentStep:d.state.currentStep+1})};c=h[d.props.templateID];c=i[c];if(!c){d.state={currentStep:null,hasTour:!1,nuxName:null,nuxShown:!1,tour:null,tourSteps:0};return babelHelpers.assertThisInitialized(d)}var e=c.nuxName;if(!e){d.state={currentStep:null,hasTour:!1,nuxName:null,nuxShown:!1,tour:null,tourSteps:0};return babelHelpers.assertThisInitialized(d)}d.state={currentStep:0,hasTour:!0,nuxName:e,nuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(e),tour:c.tour,tourSteps:c.steps};return d}var d=c.prototype;d.render=function(){var a=this.state.currentStep;if(a==null||this.props.contextRefs==null||this.state.hasTour==!1||this.state.nuxShown==!1||this.state.tour==null||this.state.tourSteps==null||a>this.props.contextRefs.length-1||a>this.state.tourSteps-1)return null;var c=this.state.tour[a];return b("React").jsxs(b("XUIAmbientNUX.react"),{alignment:c.alignment,behaviors:{ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextRef:this.props.contextRefs[a],offsetY:8,position:c.position,shown:this.state.nuxShown,width:"normal",onCloseButtonClick:this.$1,children:[b("React").jsx(b("SUIText.react"),{className:"_4jal",shade:"white",size:"medium_DEPRECATED",theme:b("SUIBusinessTheme"),weight:"bold",children:c.title}),b("React").jsx(b("SUIText.react"),{className:"_4jal _4jam",shade:"white",size:"medium_DEPRECATED",theme:b("SUIBusinessTheme"),children:c.content}),b("React").jsx("div",{className:"_4jan",children:b("React").jsx("button",{className:"_4jao",href:"#",onClick:c.isFinalStep==="true"?this.$2:this.$3,children:b("React").jsx(b("Text.react"),{className:"_4jap",children:c.buttonText})})})]})};d.$4=function(){if(!this.state.nuxName)return;b("SimpleNUXMessage").markMessageSeenByUser(this.state.nuxName);this.setState({nuxShown:!1})};return c}(b("React").Component);e.exports=c}),null);
__d("AdsCanvasInlineBuilder.react",["cx","AdsCanvasBuilderUtils","AdsCanvasInlineBuilderActionBarContainer.react","AdsCanvasInlineBuilderTour.react","AdsCanvasPreviewContainer.react","AdsCanvasUnifiedBuilderEditorPaneContainer.react","AdsLeadGenConstants","Layout.react","React","RichMediaEditorConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("Layout.react").Column,i=b("Layout.react").FillColumn,j=(a=b("RichMediaEditorConstants")).EDITOR_ELEMENT_CONTAINER_ID,k=a.INLINE_EDITOR_HEIGHT,l=a.INLINE_PREVIEW_WIDTH,m=a.INLINE_PREVIEW_HEIGHT_WITH_TAB,n=a.INLINE_PREVIEW_WIDTH_WITH_TAB,o=a.INLINE_PREVIEW_MARGIN_WITH_TAB;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(){return c.refs.inlineBuilderEditorContainer},c.$3=function(){var a=c.refs.inlineBuilderActionBarContainer;a=a.refs.inlineBuilderActionBar;return a.refs.inlineBuilderPreviewButton},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=k,c=l,d=0,e=this.context.canvasCapabilityConfig.hasCapability("CAN_CREATE_INSTAGRAM_CANVAS");e&&this.props.templateID!==b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID&&(a=m,c=n,d=o);return b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_15ck",children:b("React").jsxs(b("Layout.react"),{children:[b("React").jsx(i,{children:b("React").jsx("div",{className:"_15cl","data-testid":"ads-canvas-inline-builder-elements-editor",id:j,ref:"inlineBuilderEditorContainer",children:b("React").jsx(b("AdsCanvasUnifiedBuilderEditorPaneContainer.react"),{isInlineTemplate:!0})})}),b("React").jsx(h,{children:b("React").jsx("div",{className:"_15cm",children:b("React").jsx(b("AdsCanvasPreviewContainer.react"),{height:a,margin:d,templateID:this.props.templateID,width:c})})})]})}),b("React").jsx("div",{className:"_15cn",children:b("React").jsx(b("AdsCanvasInlineBuilderActionBarContainer.react"),{ref:"inlineBuilderActionBarContainer"})}),this.$1()]})};d.$1=function(){return b("React").jsx(b("AdsCanvasInlineBuilderTour.react"),{contextRefs:[this.$2,this.$2,this.$3],templateID:this.props.templateID})};return c}(b("React").Component);c.contextTypes=b("AdsCanvasBuilderUtils").getContextTypes();e.exports=c}),null);
__d("AdsCanvasInlineBuilderContainer.react",["cx","AdsCallToActionTypesCond","AdsCanvasBuilderUtils","AdsCanvasInitDataAction","AdsCanvasInlineBuilder.react","AdsCanvasInlineBuilderUtils","AdsCanvasInlineContent","AdsCanvasInlineTransformCanvasDataAction","AdsCanvasLoadDynamicCanvasAction","AdsFluxContainer","AdsLeadGenFormEditorClearValidationStoreAction","AdsLeadGenFormEditorClearViewStoreAction","AdsLeadGenFormEditorSetCallToActionTypeAction","AdsLeadGenFormEditorSetPageAction","React","SUIBusinessTheme","SUISpinner.react","SUIText.react","adsCanvasInlineBuilderSelector","adsCanvasInlineBuilderShouldTransformInlineCanvas","cxMargin","immutable","nullthrows","AdsCanvasCurrentCanvasIDStore","RichMediaEditorLoggerStore","RichMediaEditorStore","AdsLeadGenFormEditorStore","AdsLeadGenFormEditorValidationStore","AdsLeadGenFormEditorViewStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("AdsCanvasCurrentCanvasIDStore"),b("RichMediaEditorLoggerStore"),b("RichMediaEditorStore"),b("AdsLeadGenFormEditorStore"),b("AdsLeadGenFormEditorValidationStore"),b("AdsLeadGenFormEditorViewStore"),b("AdsLeadGenFormEditorClearValidationStoreAction").dispatch({},{line:"99",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorClearViewStoreAction").dispatch({},{line:"100",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorSetCallToActionTypeAction").dispatch({callToActionType:b("AdsCallToActionTypesCond").TYPES.SIGN_UP.name},{line:"102",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorSetPageAction").dispatch({page:{capabilities:b("immutable").Set(),id:this.props.pageID,name:this.props.pageName,pictureURL:this.props.pagePictureUrl||""}},{line:"106",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsCanvasInitDataAction").dispatch({canvasID:this.props.canvasID,pageID:this.props.pageID,source:this.props.canvasSource,supportFacebookEnabled:this.props.supportFacebookEnabled,supportInstagramEnabled:this.props.supportInstagramEnabled},{line:"115",module:"AdsCanvasInlineBuilderContainer.react.js"})};c.getStores=function(){return b("adsCanvasInlineBuilderSelector").getStores()};c.calculateState=function(){return b("adsCanvasInlineBuilderSelector")()};d.getChildContext=function(){return{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,defaultURL:this.props.defaultURL,forceChooseSpecificOrder:this.props.forceChooseSpecificOrder,pageID:this.props.pageID,pageName:this.props.pageName,productCatalogID:this.props.productCatalogID,productSetID:this.props.productSetID,theme:b("SUIBusinessTheme"),onDoneSuccess:this.props.onDoneSuccess}};d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(){this.$1()};d.render=function(){if(!this.state.areCanvasReady){var a;return(a=b("React")).jsx("div",{className:"_2j_x",children:a.jsxs("div",{className:"_5_zr",children:[a.jsx(b("SUISpinner.react"),{theme:b("SUIBusinessTheme")}),a.jsx(b("SUIText.react"),{margin:"_3-8-",size:"meta1",children:b("AdsCanvasInlineContent").INLINE_BUILDER_LOADING})]})})}return b("React").jsx("div",{className:"_2j_x","data-testid":"ads-canvas-inline-builder",children:b("React").jsx(b("AdsCanvasInlineBuilder.react"),{templateID:this.props.templateID})})};d.$1=function(){this.state.hasCanvasDynamic&&this.$2(this.state.allCanvases),this.state.areCanvasesLoaded&&!this.state.areCanvasReady&&this.$3(this.state.allCanvases,this.state.allElements)};d.$2=function(a){a=a.get(0);a=b("nullthrows")(a.dynamicSetting);a=a.childDocumentIDs;b("AdsCanvasLoadDynamicCanvasAction").dispatch({canvasIDs:h(a)},{line:"197",module:"AdsCanvasInlineBuilderContainer.react.js"})};d.$3=function(a,c){__p&&__p();var d=this;a.map(function(e,f){if(b("adsCanvasInlineBuilderShouldTransformInlineCanvas")(e,c.get(f))){e=b("AdsCanvasInlineBuilderUtils").duplicateTemplateSourceDocument(e,c.get(f),d.props.templateID,d.props.defaultURL,d.props.canvasSource,!1,d.props.forceChooseSpecificOrder);var g=e.canvasDocument;e=e.elements;a=a.set(f,g);c=c.set(f,e)}});b("AdsCanvasInlineTransformCanvasDataAction").dispatch({canvases:a,elements:c.flatten(!0)},{line:"233",module:"AdsCanvasInlineBuilderContainer.react.js"})};return c}(b("React").PureComponent);a.childContextTypes=b("AdsCanvasBuilderUtils").getContextTypes();e.exports=b("AdsFluxContainer").create(a,{name:e.id})}),null);
__d("AdsCanvasInlineBuilderDialog.react",["cx","fbt","AdsCanvasInlineBuilderContainer.react","AdsCanvasInlineContent","AdsStaticGuidanceCard.react","LayerFadeOnHide","React","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidUpdate=function(){this.refs.dialog&&this.refs.dialog.layer.subscribe("beforehide",this.props.onBeforeHide)};d.render=function(){if(this.props.canvasID==null||this.props.canvasID===""||!this.props.isShown)return null;return this.props.pageID==null||this.props.pageID===""?this.$1():b("React").jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},ref:"dialog",shown:this.props.isShown,useCustomPadding:!0,width:836,onToggle:this.props.onToggle,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:this.props.createFromTemplate?b("AdsCanvasInlineContent").INLINE_BUILDER_TITLE_CREATE:b("AdsCanvasInlineContent").INLINE_BUILDER_TITLE_EDIT}),b("React").jsx(b("XUIDialogBody.react"),{useCustomPadding:!0,children:b("React").jsx(b("AdsCanvasInlineBuilderContainer.react"),{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,canvasID:this.props.canvasID,canvasSource:this.props.canvasSource,defaultURL:this.props.defaultURL,forceChooseSpecificOrder:!1,pageID:b("nullthrows")(this.props.pageID),pageName:this.props.pageName,pagePictureUrl:this.props.pagePictureUrl,productCatalogID:this.props.productCatalogID,productSetID:this.props.productSetID,supportFacebookEnabled:this.props.supportFacebookEnabled,supportInstagramEnabled:this.props.supportInstagramEnabled,templateID:b("nullthrows")(this.props.templateID),onDoneSuccess:this.props.onDoneSuccess})})]},"dialog")};d.$1=function(){return b("React").jsx("div",{className:"_21uh",children:b("React").jsx(b("AdsStaticGuidanceCard.react"),{ccCardProps:{category:"ERROR",messageID:"message_that_the_advertiser_has_no_role_for_selected_page",textData:[{type:"PARAGRAPH",data:{text:h._("You don't have any page selected. You need to have an admin role on a page to create Instant Experience ads for that page.")}}]}})})};return c}(b("React").Component);e.exports=a}),null);
__d("ReactComposerCanvasActions",["ReactComposerCanvasActionType","ReactComposerDispatcher"],(function(a,b,c,d,e,f){a={showCanvasSelector:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerCanvasActionType").SHOW_CANVAS_SELECTOR})},hideCanvasSelector:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerCanvasActionType").HIDE_CANVAS_SELECTOR})}};e.exports=a}),null);
__d("ReactComposerCollectionDialogContainer.react",["AdsCanvasCapabilityConfig","AdsCanvasCloseUnsavedCanvasDialogContainer.react","AdsCanvasEditorEnums","AdsCanvasInlineBuilderDialog.react","AdsCanvasInlineUIStore","AdsCanvasShowCloseUnsavedCanvasDialogDataAction","AdsCFAdgroupEditorContext","AdsPageStore","AdsUEditorAdgroupContextContainer.react","ApiClient","DOM","FluxContainer","React","ReactComposerCollectionActions","ReactDOM","RichMediaEditorStore","adsCanvasIsCurrentDocumentPublishedSelector","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasEditorEnums").SaveStateEnum;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){if(!d.state.showInlineModal||d.state.documentEditState===g.SAVED||d.state.isPublished)return!0;b("ReactDOM").render(b("React").jsx(b("AdsCanvasCloseUnsavedCanvasDialogContainer.react"),{onCancel:b("emptyFunction"),onConfirm:d.$3}),b("DOM").create("div"));b("AdsCanvasShowCloseUnsavedCanvasDialogDataAction").dispatch({showDialog:!0},{line:"146",module:"ReactComposerCollectionDialogContainer.react.js"});return!1};d.$3=function(){d.$4()};d.$2=function(a,c){b("ReactComposerCollectionActions").selectCollection(d.props.composerID,d.props.actorID,a,d.props.targetID),d.$4(a)};b("ApiClient").setAccessToken(c.config.accessToken);return d}c.getStores=function(){return[].concat(b("adsCanvasIsCurrentDocumentPublishedSelector").getStores(),[b("AdsCanvasInlineUIStore"),b("RichMediaEditorStore"),b("AdsPageStore")])};c.calculateState=function(a,c){a=b("AdsPageStore").get(c.config.pageID);return{canvasID:b("AdsCanvasInlineUIStore").getCanvasID(),defaultURL:a.link,documentEditState:b("RichMediaEditorStore").getDocumentEditState(),isPublished:b("adsCanvasIsCurrentDocumentPublishedSelector")(),pageName:a.name,showInlineModal:b("AdsCanvasInlineUIStore").getShowInlineModal(),templateID:b("AdsCanvasInlineUIStore").getTemplateID()}};var d=c.prototype;d.render=function(){var a,c=this.props.config,d=c.canvasCapabilities;d=new(b("AdsCanvasCapabilityConfig"))((a={},a.CAN_ADD_PRODUCT_SET=d.canAddProductSet,a.CAN_ADD_STORE_LOCATOR=d.canAddStoreLocator,a));return b("React").jsx(b("AdsUEditorAdgroupContextContainer.react"),{context:b("AdsCFAdgroupEditorContext"),children:b("React").jsx(b("AdsCanvasInlineBuilderDialog.react"),{accessToken:c.accessToken,businessID:c.businessID,canvasCapabilityConfig:d,canvasID:this.state.canvasID,canvasSource:"page_composer",createFromTemplate:!0,defaultURL:this.state.defaultURL,isShown:this.state.showInlineModal,pageID:c.pageID,pageName:this.state.pageName,supportFacebookEnabled:!0,supportInstagramEnabled:!1,templateID:this.state.templateID,onBeforeHide:this.$1,onDoneSuccess:this.$2,onToggle:b("emptyFunction")})})};d.$4=function(a){b("ReactComposerCollectionActions").updateCollectionDialogVisibility(this.props.composerID,!1,a)};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("ReactComposerCollectionPostButton.react",["React","ReactComposerCollectionDialogContainer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsxs("div",{className:this.props.className,onClick:this.props.onShowDialog,role:"presentation",children:[this.props.children,b("React").jsx(b("ReactComposerCollectionDialogContainer.react"),{actorID:this.props.actorID,canvasCapabilities:this.props.config.canvasCapabilities,composerID:this.props.composerID,composerType:this.props.composerType,config:this.props.config,targetID:this.props.targetID})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ReactComposerCollectionPostButtonContainer.react",["AdsCanvasInlineUIStore","FluxContainer","React","ReactComposerCollectionActions","ReactComposerCollectionPostButton.react","RichMediaEditorActions","ReactComposerContextTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.context.composerID,c=d.props.config;b("ReactComposerCollectionActions").setDefaultCanvasAndTemplateID(a,c.defaultCanvasID,c.templateID);b("RichMediaEditorActions").setCanvasPageId(c.pageID);b("ReactComposerCollectionActions").updateCollectionDialogVisibility(a,!0,d.state.canvasID)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AdsCanvasInlineUIStore")]};c.calculateState=function(){return{canvasID:b("AdsCanvasInlineUIStore").getCanvasID()}};var d=c.prototype;d.render=function(){var a=this.props.config;return b("React").jsx(b("ReactComposerCollectionPostButton.react"),{actorID:this.context.actorID,config:a,canvasCapabilities:a.canvasCapabilities,composerID:this.context.composerID,composerType:this.context.composerType,onShowDialog:this.$1,targetID:this.context.targetID,children:this.props.children})};return c}(b("React").Component);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a)}),null);
__d("ReactComposerPhotoCarouselActions",["ReactComposerDispatcher","ReactComposerPhotoCarouselActionType","ReactComposerPhotoStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerPhotoStore");a={selectPhotoCarouselEntryPoint:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").SELECT_PHOTO_CAROUSEL})},unselectPhotoCarouselEntryPoint:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").UNSELECT_PHOTO_CAROUSEL})},setPreviewCompleted:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").PREVIEW_COMPLETED})},setPreviewIncompleted:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").PREVIEW_INCOMPLETED})},showPhotoCarouselUrlEditArea:function(a,c,d){b("ReactComposerDispatcher").dispatch({composerID:a,source:c,targetID:d,type:b("ReactComposerPhotoCarouselActionType").SHOW_CAROUSEL_URL_INPUT_AREA})},hidePhotoCarouselUrlEditArea:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").HIDE_CAROUSEL_URL_INPUT_AREA})},seenNux:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerPhotoCarouselActionType").SEEN_NUX})}};e.exports=a}),null);
__d("ReactComposerSlideshowImageUploadsContainer.react",["cx","AdsImageSelectorV2ModalEntryPoint","Arbiter","AsyncDialog","AsyncRequest","DateConsts","Link.react","PagesPicModalManager","React","ReactComposerSlideshowActions","SlideshowConstants","SlideshowMediaUploadContainer.react","XPagesPicMenuDialogController","emptyFunction","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=b("SlideshowConstants").image_duration_in_sec_options,i=b("SlideshowConstants").max_total_length,j="slideshow_pages_composer";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var b=d.refs.imageFileInput.getFileInput();b!==null&&b!==void 0&&d.props.onFilesSelected!==null&&d.props.onFilesSelected!==void 0&&d.props.onFilesSelected(a,b)},d.$3=function(){b("AsyncDialog").send(new(b("AsyncRequest"))(d.$4()),function(a){self.$2=a;var c=b("PagesPicModalManager").subscribePhotosSelectedConfirm(function(c,e){b("ReactComposerSlideshowActions").selectImagesConfirm(d.props.composerID,e),d.props.shouldLimitTotalLength&&d.$5(d.props.numberOfSelectedImages+e.length),a.hide()});a.subscribe("hide",function(a){b("Arbiter").unsubscribe(c)})})},d.$4=function(){return b("XPagesPicMenuDialogController").getURIBuilder().setInt("page_id",d.props.pageID).setString("source",j).setBool("multiselect",!0).getURI()},c)||babelHelpers.assertThisInitialized(d)}c.handleFileInput=function(a){var c=this;b("tidyEvent")(a.subscribe("change",function(b){if(!a.getValue())return;c.$1(b,a);self.$2&&self.$2.hide()}))};var d=c.prototype;d.UNSAFE_componentWillMount=function(){c.$1=this.props.onFilesSelected};d.render=function(){var a=null;switch(this.props.entryPoint){case b("AdsImageSelectorV2ModalEntryPoint").SLIDESHOW_IMAGE_UPLOAD_FROM_MORE_LINK:a=b("React").jsx(b("Link.react"),{className:"_38i2"});break;case b("AdsImageSelectorV2ModalEntryPoint").SLIDESHOW_IMAGE_UPLOAD_FROM_ADD_PHOTOS_BUTTON:a=b("SlideshowMediaUploadContainer.react").getImageUploadButton();break}return b("React").jsx("span",{onClick:this.$3,role:"presentation",children:a})};d.$5=function(a){if(this.props.durationWithTransitionInMS*a>=i){var c=i/a;a=h.slice().reverse().find(function(a){return a*b("DateConsts").MS_PER_SEC<c});a&&b("ReactComposerSlideshowActions").changeDurationBySystem(this.props.composerID,a*b("DateConsts").MS_PER_SEC)}};return c}(b("React").Component);c.$1=b("emptyFunction");c.$2=null;c.propTypes={composerID:a.string.isRequired,mediaAcceptParam:a.string.isRequired,pageID:a.string.isRequired,onFilesSelected:a.func.isRequired};e.exports=c}),null);
__d("ReactComposerSlideshowDialogContainer.react",["AdsImageSelectorV2ModalEntryPoint","QE2Logger","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerSelectedImagesStore","ReactComposerSlideshowActions","ReactComposerSlideshowAudioStore","ReactComposerSlideshowImageUploadsContainer.react","ReactComposerSlideshowStore","SlideshowDialog.react","SlideshowMediaUploadContainer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerSlideshowDialogContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerSelectedImagesStore"),b("ReactComposerSlideshowAudioStore"),b("ReactComposerSlideshowStore"))],propTypes:{dialogShown:a.bool,maxSelectedImages:a.number,mediaAcceptParam:a.string.isRequired,pageID:a.string.isRequired,showSlideshowPhotoEditButton:a.bool,showSlideshowNewDesign:a.bool,onCloseDialog:a.func,onCreateSlideshow:a.func,onFilesSelected:a.func.isRequired},statics:{calculateState:function(a,c){var d,e;c=!b("ReactComposerMediaUploadStore").isUploading(a);var f=b("ReactComposerSelectedImagesStore").getSelectedImages(a);return{audioFileUploadInfo:(d=b("ReactComposerSlideshowAudioStore")).getAudioFileUploadInfo(a),durationWithTransitionInMS:(e=b("ReactComposerSlideshowStore")).getDurationInMS(a),format:b("ReactComposerSelectedImagesStore").getFormat(a),imagesAllLoaded:c,imagesCrops:b("ReactComposerSelectedImagesStore").getImagesCrops(a),shouldShowDurationWarning:e.getShouldShowDurationWarning(a),isPreviewPlaying:d.getIsPreviewPlaying(a),recentlyUsedStorylineMoods:d.getRecentlyUsedStorylineMoods(a),selectedImages:f,selectedMusicCategory:d.getSelectedMusicCategory(a),selectedStorylineMood:d.getSelectedStorylineMood(a),selectedTab:e.getSelectedTab(a),storylineMoodFiles:d.getStorylineMoodFiles(a),transitionInMS:e.getTransitionInMS(a),showPreview:f.length>0}}},componentDidMount:function(){b("QE2Logger").logExposureForPage("new_slideshow_migration_to_page_composer_universe",this.props.pageID)},_onChangeDuration:function(a){b("ReactComposerSlideshowActions").changeDuration(this.context.composerID,a.value)},_onChangeDurationRadioButton:function(a){b("ReactComposerSlideshowActions").changeDuration(this.context.composerID,a)},_onChangeFormat:function(a){b("ReactComposerSlideshowActions").changeFormat(this.context.composerID,a.value)},_onChangeTransition:function(a){b("ReactComposerSlideshowActions").changeTransition(this.context.composerID,a)},_onChangeStorylineMood:function(a){b("ReactComposerSlideshowActions").changeStorylineMoodFile(this.context.composerID,a)},_onDeleteStorylineMood:function(a){b("ReactComposerSlideshowActions").deleteStorylineMoodFile(this.context.composerID,a)},_onCreateSlideshow:function(){__p&&__p();var a=this.context.composerID;if(b("ReactComposerSlideshowStore").isEditing(a)){var c=b("ReactComposerSelectedImagesStore").getRemovedUploadIDs(a);c.forEach(function(c){if(b("ReactComposerMediaUploadStore").getMediaUploadExists(a,c)){c=b("ReactComposerMediaUploadStore").getMediaUpload(a,c);b("ReactComposerMediaUploadActions").removePhotoAndPhotoUpload(a,c)}})}this.props.onCreateSlideshow&&this.props.onCreateSlideshow();b("ReactComposerSlideshowActions").createSlideshow(this.context.composerID)},_onImageRemove:function(a){var c=this.context.composerID;b("ReactComposerSlideshowActions").removeImage(c,a);if(!b("ReactComposerSlideshowStore").isEditing(c)&&b("ReactComposerMediaUploadStore").getMediaUploadExists(c,a.key)){a=b("ReactComposerMediaUploadStore").getMediaUpload(c,a.key);b("ReactComposerMediaUploadActions").removePhotoAndPhotoUpload(c,a)}},_onImageReorder:function(a,c){b("ReactComposerSlideshowActions").reorderImages(this.context.composerID,a,c)},_onTabSelect:function(a){b("ReactComposerSlideshowActions").selectTab(this.context.composerID,a)},_getImageUploadContainer:function(a){return b("React").jsx(b("ReactComposerSlideshowImageUploadsContainer.react"),{composerID:this.context.composerID,durationWithTransitionInMS:this.state.durationWithTransitionInMS,entryPoint:a,mediaAcceptParam:this.props.mediaAcceptParam,numberOfSelectedImages:this.state.selectedImages.length,pageID:this.props.pageID,pageImages:this.state.pageImages,shouldLimitTotalLength:!!this.props.showSlideshowNewDesign,onFilesSelected:this.props.onFilesSelected})},_onMusicCategorySelect:function(a){b("ReactComposerSlideshowActions").musicCategorySelect(this.context.composerID,a)},_onPreviewStateChange:function(a){b("ReactComposerSlideshowActions").previewStateChange(this.context.composerID,a)},_onAudioFileUploadStarted:function(){b("ReactComposerSlideshowActions").audioFileUploadStarted(this.context.composerID)},_onAudioFileUploadError:function(){b("ReactComposerSlideshowActions").audioFileUploadError(this.context.composerID)},_onAudioFileUploadSuccess:function(a){b("ReactComposerSlideshowActions").audioFileUploadSuccess(this.context.composerID,a)},render:function(){return b("React").jsxs(b("SlideshowDialog.react"),{audioFileUploadInfo:this.state.audioFileUploadInfo,dialogShown:this.props.dialogShown,durationWithTransitionInMS:this.state.durationWithTransitionInMS,format:this.state.format,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isAdsCreation:!1,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,recentlyUsedStorylineMoods:this.state.recentlyUsedStorylineMoods,selectedImages:this.state.selectedImages,selectedMusicCategory:this.state.selectedMusicCategory,selectedStorylineMood:this.state.selectedStorylineMood,selectedTab:this.state.selectedTab,shouldLimitTotalLength:this.props.showSlideshowNewDesign,showDurationWarning:this.state.shouldShowDurationWarning,showPreview:this.state.showPreview,showSlideshowPhotoEditButton:!1,showSlideshowImageCroppingEditOption:!1,storylineMoodFiles:this.state.storylineMoodFiles,targetID:this.props.pageID,transitionInMS:this.state.transitionInMS,onAudioFileUpload:this._onAudioFileUploadStarted,onAudioFileUploadError:this._onAudioFileUploadError,onAudioFileUploadSuccess:this._onAudioFileUploadSuccess,onChangeDuration:this.props.showSlideshowNewDesign?this._onChangeDurationRadioButton:this._onChangeDuration,onChangeFormat:this._onChangeFormat,onChangeTransition:this._onChangeTransition,onChangeStorylineMood:this._onChangeStorylineMood,onCloseDialog:this.props.onCloseDialog,onCreateSlideshow:this._onCreateSlideshow,onDeleteStorylineMood:this._onDeleteStorylineMood,onImageRemove:this._onImageRemove,onImageReorder:this._onImageReorder,onMusicCategorySelect:this._onMusicCategorySelect,onPreviewStateChange:this._onPreviewStateChange,onTabSelect:this._onTabSelect,children:[this._getImageUploadContainer(b("AdsImageSelectorV2ModalEntryPoint").SLIDESHOW_IMAGE_UPLOAD_FROM_MORE_LINK),b("React").jsx(b("SlideshowMediaUploadContainer.react"),{hidden:this.state.showPreview||!this.state.imagesAllLoaded,showVideoButton:!1,children:this._getImageUploadContainer(b("AdsImageSelectorV2ModalEntryPoint").SLIDESHOW_IMAGE_UPLOAD_FROM_ADD_PHOTOS_BUTTON)})]})}});e.exports=c}),null);
__d("ReactComposerSlideshowPostButton.react",["React","ReactComposerSlideshowDialogContainer.react","ReactFragment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsxs("div",{className:this.props.className,onClick:this.props.onShowDialog,role:"presentation",children:[this.props.children,this.renderLayers()]})};d.renderLayers=function(){var a=null;this.props.dialogShown&&(a=b("React").jsx(b("ReactComposerSlideshowDialogContainer.react"),babelHelpers["extends"]({},this.props,{onCloseDialog:this.props.onCancel})));return b("ReactFragment").create({dialog:a})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ReactComposerSlideshowPostButtonContainer.react",["React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerSlideshowActions","ReactComposerSlideshowLoggingStore","ReactComposerSlideshowPostButton.react","ReactComposerSlideshowStore","SlideshowConstants","SlideshowDataManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerSlideshowPostButtonContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerSlideshowStore"))],propTypes:{className:a.string,maxSelectedImages:a.number.isRequired,mediaAcceptParam:a.string.isRequired,pageID:a.string.isRequired,showSlideshowNewDesign:a.bool,onFilesSelected:a.func.isRequired},statics:{calculateState:function(a,c){c=b("ReactComposerSlideshowStore").shouldShowSlideshowDialog(a);return{dialogShown:c}}},componentDidMount:function(){var a=this.context.composerID;b("SlideshowDataManager").fetchStorylineMoodFiles(function(c){b("ReactComposerSlideshowActions").setStorylineMoodFiles(a,c)},this.props.pageID);this.props.showSlideshowNewDesign&&b("ReactComposerSlideshowActions").changeFormat(this.context.composerID,b("SlideshowConstants").formats.Square);b("ReactComposerSlideshowLoggingStore").activate()},render:function(){return b("React").jsx(b("ReactComposerSlideshowPostButton.react"),{className:this.props.className,dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,showSlideshowNewDesign:this.props.showSlideshowNewDesign,onCancel:this._onCancel,onFilesSelected:this.props.onFilesSelected,onShowDialog:this._onShowDialog,children:this.props.children})},_onShowDialog:function(){b("ReactComposerSlideshowActions").showSlideshowDialog(this.context.composerID,"composer_photo_video_tab")},_onCancel:function(){b("ReactComposerMediaUploadActions").removeAllPhotoUploads(this.context.composerID,b("ReactComposerMediaUploadStore").getUploadsOfType(this.context.composerID,b("ReactComposerMediaUploadType").PHOTO)),b("ReactComposerSlideshowActions").closeSlideshowDialog(this.context.composerID)}});e.exports=c}),null);
__d("XCarouselPageComposerPhotoUploadFirstController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/photouploadfirst/",{composer_id:{type:"String"},target_id:{type:"Int"}})}),null);
__d("ReactPageComposerMediaAttachmentSimplifiedButtons.react",["cx","fbt","ix","ActorURI","AsyncRequest","ComposerTargetData","ComposerXSessionIDs","DOMContainer.react","FileInput.react","FlexLayout.react","Grid.react","MediaManagerLibertyUtils","PageContentTabAdsIXDisplayConstants","PagesComposerActionsLogger","PagesComposerPostActionsLoggerEvent","ReactComposerAttachmentStore","ReactComposerCanvasActions","ReactComposerContextTypes","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaUtils","ReactComposerPhotoCarouselActions","ReactComposerSlideshowPostButtonContainer.react","SimpleNUXMessage","SimpleNUXMessageTypes","XCarouselPageComposerPhotoUploadFirstController","Image.react","Link.react","ReactComponentWithPureRenderMixin","React","XMediaManagerController","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("PageContentTabAdsIXDisplayConstants").IX_PAGE_COMPOSER_BUTTON_LABEL,k=b("Grid.react").GridItem;a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactPageComposerMediaAttachmentSimplifiedButtons",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{canUploadPhotos:a.bool,canvasConfig:a.object,carouselConfig:a.object,collectionConfig:a.object,createAlbumLink:a.any,mediaAcceptParam:a.shape({videos:a.string,photos:a.string,both:a.string}).isRequired,onFilesSelected:a.func.isRequired,showCanvasEntryPoint:a.bool,showCarouselEntryPoint:a.bool,showCollectionEntryPoint:a.bool,showMultipostEntryPoint:a.bool,showPhotoAlbumEntryPoint:a.bool,showSlideshowEntryPoint:a.bool,showUploadPhotosButton:a.bool,slideshowConfig:a.object,targetData:a.instanceOf(b("ComposerTargetData")).isRequired},getDefaultProps:function(){return{mediaAcceptParam:{}}},componentDidMount:function(){b("ReactComposerAttachmentStore").getSelectedAttachmentID(this.context.composerID)&&b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").SHOW_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)})},render:function(){__p&&__p();var a=[];this.props.showUploadPhotosButton&&a.push(this._getUploadPhotosButton());this.props.showMultipostEntryPoint&&a.push(this._getPostAcrossPagesButton());var c=null,d=null;if(this.props.showPhotoAlbumEntryPoint&&this.props.createAlbumLink){var e=b("React").jsx(b("DOMContainer.react"),{className:"_3m1x","data-testid":"media-attachment-dialog",display:"block",children:this.props.createAlbumLink});c=b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",onClick:this._onClickPhotoAlbumOption,children:e})},"createAlbum")}this.props.showCarouselEntryPoint&&(d=this._getCarouselPostButton());a.push(c);a.push(d);this.props.showSlideshowEntryPoint&&a.push(this._getSlideshowPostButton());this.props.showCanvasEntryPoint&&a.push(this._getCanvasPostButton());return b("React").jsx("div",{className:"_3m1_","data-testid":"media-attachment-buttons",children:b("React").jsx(b("Grid.react"),{className:"_3m20",cols:1,children:a.filter(function(a){return a!=null})})})},_getUploadPhotosButton:function(){if(!this.props.canUploadPhotos)return null;var a=this.props.targetData.targetSupportsMultiplePhotos,c=this.props.mediaAcceptParam.both,d=a?h._("Upload Photos\/Video"):h._("Upload Photo\/Video"),e=h._("Add photos or video to your status.");return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("FileInput.react"),{accept:c,multiple:a,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:"fileInput","data-testid":"media-attachment-add-photo",children:b("React").jsx(b("Link.react"),{className:"_3m1z",children:this._renderPhotoPostOption(l.PHOTOVIDEO,d,e)})})},"uploadPhoto")},_redirectToCreatorStudio:function(){var a=b("XMediaManagerController").getURIBuilder().setFBID("multipost_page_id",this.context.targetID).setFBID("selected_single_page_id",this.context.targetID).getURI();b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_PAGES_COMPOSER);b("MediaManagerLibertyUtils").openCreatorStudio(a,!1)},_getPostAcrossPagesButton:function(){var a=h._("Post Video Across Pages"),c=h._("Upload and post your video across multiple Pages at the same time."),d=!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_PAGES_COMPOSER),e=h._("NEW");return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",onClick:this._redirectToCreatorStudio,children:b("React").jsxs(b("FlexLayout.react"),{justify:"all",children:[this._renderPhotoPostOption(l.MULTIPOST,a,c),d?b("React").jsx("div",{className:"_7bqx",children:b("React").jsx("div",{className:"_7bqy",children:e})}):null]})})},"postAcrossPages")},_onUploadPhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_ATTACHMENT_UPLOAD_BUTTON),b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").CLICK_UPLOAD_PHOTO_OPTION,target_id:parseInt(this.context.targetID,10)})},_onClickPhotoAlbumOption:function(){b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").CLICK_PHOTO_ALBUM_OPTION,target_id:parseInt(this.context.targetID,10)})},_onFilesSelected:function(a){this.props.onFilesSelected(a,this.refs.fileInput.getFileInput()),b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())},_getCarouselPostButton:function(){if(!this.props.canUploadPhotos)return null;var a=h._("Create a Photo Carousel");this.props.carouselConfig&&this.props.carouselConfig.supportVideoCarousel&&(a=h._("Create a Photo\/Video Carousel"));var c=h._("Build a scrolling photo carousel with a link.");return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{onClick:this._onCarouselClick,className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.CAROUSEL,a,c)})},"carousel")},_onCarouselClick:function(){__p&&__p();b("ReactComposerPhotoCarouselActions").selectPhotoCarouselEntryPoint(this.context.composerID);if(!this.props.carouselConfig||!this.props.carouselConfig.ComposerPhotoCarouselUploadFirst)b("ReactComposerPhotoCarouselActions").showPhotoCarouselUrlEditArea(this.context.composerID);else{var a=b("XCarouselPageComposerPhotoUploadFirstController").getURIBuilder().setString("composer_id",this.context.composerID).setInt("target_id",parseInt(this.context.targetID,10)).getURI();a=b("ActorURI").create(a,this.context.targetID);a=new(b("AsyncRequest"))().setURI(a);a.send();b("ReactComposerPhotoCarouselActions").setPreviewIncompleted(this.context.composerID)}a={event:b("PagesComposerPostActionsLoggerEvent").CLICK_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10),composer_session_id:b("ComposerXSessionIDs").getSessionID(this.context.composerID)};b("PagesComposerActionsLogger").log(a)},_getSlideshowPostButton:function(){var a=this.props.slideshowConfig;if(!a)return null;var c=h._("Create Slideshow"),d=h._({"*":{"*":"Add {Minimum number of images} to {Maximum number of images} photos to create a video."}},[h._param("Minimum number of images",a?a.minPhotoNum:3,[0]),h._param("Maximum number of images",a?a.maxPhotoNum:7,[0])]);c=b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.SLIDESHOW,c,d)});return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("ReactComposerSlideshowPostButtonContainer.react"),{className:"_3-8-",maxSelectedImages:a.maxPhotoNum,mediaAcceptParam:this.props.mediaAcceptParam.photos,pageID:a.pageID,showSlideshowNewDesign:a.showSlideshowNewDesign,onFilesSelected:this._onSlideshowFilesUpload,children:c})},"slideshow")},_onSlideshowFilesUpload:function(a,c){this.props.onFilesSelected(a,c),b("ReactComposerMediaUtils").clearInput(c)},_getCanvasPostButton:function(){var a=j,c=h._("Now you can tell a more immersive story by combining images and videos.");this.props.canvasConfig&&this.props.canvasConfig.supportVideoCanvas&&(c=h._("Combine photos and videos into a fullscreen experience that opens instantly from your post."));return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{"data-testid":"page-composer-share-canvas-link",onClick:this._onCanvasClick,className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.CANVAS,a,c)})},"canvas")},_onCanvasClick:function(){b("ReactComposerCanvasActions").showCanvasSelector(this.context.composerID);var a={event:b("PagesComposerPostActionsLoggerEvent").CLICK_CANVAS_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};b("PagesComposerActionsLogger").log(a)},_renderPhotoPostOption:function(a,c,d){var e=null,f=null;if(a===l.CAROUSEL&&this.props.carouselConfig&&this.props.carouselConfig.showCarouselOptionSuperscript){var g=h._("NEW");e=b("React").jsx("sup",{className:"_9td",children:g})}a===l.MULTIPOST&&(f=b("React").jsx("div",{className:"_7bqz",children:b("React").jsx(b("Image.react"),{src:i("517122")})}));return b("React").jsxs(b("Grid.react"),{className:"_3m1-",cols:2,children:[b("React").jsx(k,{className:"_5xvi",children:b("React").jsx(b("Image.react"),{className:"_5xvj",src:this._getIconSource(a)})}),b("React").jsxs(k,{className:"_5xvk",children:[b("React").jsxs("div",{className:"_5xvl",children:[c,e,f]}),b("React").jsx("div",{className:"_5xvm",children:d})]})]})},_getIconSource:function(a){switch(a){case l.PHOTOVIDEO:return i("28660");case l.PHOTOALBUM:return i("28659");case l.CAROUSEL:return i("28656");case l.SLIDESHOW:return i("28661");case l.COLLECTION:return i("358650");case l.CANVAS:return i("28658");case l.MULTIPOST:return i("793855");default:return null}}});var l=Object.freeze({PHOTOVIDEO:"photo_video",PHOTOALBUM:"photo_album",CAROUSEL:"carousel",SLIDESHOW:"slideshow",CANVAS:"canvas",COLLECTION:"collection",MULTIPOST:"multipost"});e.exports=c}),null);
__d("ReactPageComposerMediaAttachmentButtons.react",["cx","fbt","ix","ActorURI","AsyncRequest","ComposerStructuredLoggerUtil","ComposerTargetData","ComposerXSessionIDs","DOMContainer.react","FileInput.react","FlexLayout.react","Grid.react","MediaManagerLibertyUtils","MediaManagerTypedLogger","PageContentTabAdsIXDisplayConstants","PagesComposerActionsLogger","PagesComposerPostActionsLoggerEvent","ReactComposerAttachmentStore","ReactComposerCanvasActions","ReactComposerCollectionPostButtonContainer.react","ReactComposerContextTypes","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaUtils","ReactComposerPhotoCarouselActions","ReactComposerSlideshowPostButtonContainer.react","SimpleNUXMessage","SimpleNUXMessageTypes","XCarouselPageComposerPhotoUploadFirstController","Image.react","Link.react","ReactComponentWithPureRenderMixin","React","XMediaManagerController","asset","cxMargin","ReactPageComposerMediaAttachmentSimplifiedButtons.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("PageContentTabAdsIXDisplayConstants").IX_PAGE_COMPOSER_BUTTON_LABEL,k=b("Grid.react").GridItem;b("ReactPageComposerMediaAttachmentSimplifiedButtons.react");a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactPageComposerMediaAttachmentButtons",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{canUploadPhotos:a.bool,canvasConfig:a.object,carouselConfig:a.object,collectionConfig:a.object,createAlbumLink:a.any,mediaAcceptParam:a.shape({videos:a.string,photos:a.string,both:a.string}).isRequired,onFilesSelected:a.func.isRequired,showCanvasEntryPoint:a.bool,showCarouselEntryPoint:a.bool,showCollectionEntryPoint:a.bool,showMultipostEntryPoint:a.bool,showPhotoAlbumEntryPoint:a.bool,showSlideshowEntryPoint:a.bool,showUploadPhotosButton:a.bool,slideshowConfig:a.object,targetData:a.instanceOf(b("ComposerTargetData")).isRequired},getDefaultProps:function(){return{mediaAcceptParam:{}}},componentDidMount:function(){b("ReactComposerAttachmentStore").getSelectedAttachmentID(this.context.composerID)&&b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").SHOW_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)}),this.props.showMultipostEntryPoint&&new(b("MediaManagerTypedLogger"))().setEvent("liberty_multipost_pages_composer_impression").setEventSource("liberty_pages_composer").setMediaManagerVisitSource("liberty_multipost_pages_composer_nux").setSelectedPageIds([this.context.targetID]).log()},render:function(){__p&&__p();var a=[];this.props.showUploadPhotosButton&&a.push(this._getUploadPhotosButton());this.props.showMultipostEntryPoint&&a.push(this._getPostAcrossPagesButton());var c=null,d=null;if(this.props.showPhotoAlbumEntryPoint&&this.props.createAlbumLink){var e=b("React").jsx(b("DOMContainer.react"),{className:"_3m1x","data-testid":"media-attachment-dialog",display:"block",children:this.props.createAlbumLink});c=b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",onClick:this._onClickPhotoAlbumOption,children:e})},"createAlbum")}c&&this._logImpression(l.PHOTOALBUM);this.props.showCarouselEntryPoint&&(d=this._getCarouselPostButton());a.push(c);a.push(d);this.props.showSlideshowEntryPoint&&a.push(this._getSlideshowPostButton());this.props.showCollectionEntryPoint&&a.push(this._getCollectionPostButton());this.props.showCanvasEntryPoint&&a.push(this._getCanvasPostButton());return b("React").jsx("div",{className:"_3m1_","data-testid":"media-attachment-buttons",children:b("React").jsx(b("Grid.react"),{className:"_3m20",cols:1,children:a.filter(function(a){return a!=null})})})},_getUploadPhotosButton:function(){if(!this.props.canUploadPhotos)return null;var a=this.props.targetData.targetSupportsMultiplePhotos,c=this.props.mediaAcceptParam.both,d=a?h._("Upload Photos\/Video"):h._("Upload Photo\/Video"),e=h._("Add photos or video to your status.");this._logImpression(l.PHOTOVIDEO);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("FileInput.react"),{accept:c,multiple:a,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:"fileInput","data-testid":"media-attachment-add-photo",children:b("React").jsx(b("Link.react"),{className:"_3m1z",children:this._renderPhotoPostOption(l.PHOTOVIDEO,d,e)})})},"uploadPhoto")},_redirectToCreatorStudio:function(){this._logClick(l.MULTIPAGEPOST);new(b("MediaManagerTypedLogger"))().setEvent("liberty_multipost_pages_composer_clicked").setEventSource("liberty_pages_composer").setSelectedPageIds([this.context.targetID]).setMediaManagerVisitSource("liberty_multipost_pages_composer_nux").log();var a=b("XMediaManagerController").getURIBuilder().setFBID("multipost_page_id",this.context.targetID).setFBID("selected_single_page_id",this.context.targetID).setEnum("reference","liberty_multipost_pages_composer_nux").getURI();b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_PAGES_COMPOSER);b("MediaManagerLibertyUtils").openCreatorStudio(a,!1)},_getPostAcrossPagesButton:function(){var a=h._("Post Video Across Pages"),c=h._("Upload and post your video across multiple Pages at the same time."),d=!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").CREATOR_STUDIO_MULTIPOST_UPSELL_NUX_ON_PAGES_COMPOSER),e=h._("NEW");this._logImpression(l.MULTIPAGEPOST);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",onClick:this._redirectToCreatorStudio,children:b("React").jsxs(b("FlexLayout.react"),{justify:"all",children:[this._renderPhotoPostOption(l.MULTIPAGEPOST,a,c),d?b("React").jsx("div",{className:"_7bqx",children:b("React").jsx("div",{className:"_7bqy",children:e})}):null]})})},"postAcrossPages")},_onUploadPhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_ATTACHMENT_UPLOAD_BUTTON),b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").CLICK_UPLOAD_PHOTO_OPTION,target_id:parseInt(this.context.targetID,10)}),this._logClick(l.PHOTOVIDEO)},_onClickPhotoAlbumOption:function(){b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").CLICK_PHOTO_ALBUM_OPTION,target_id:parseInt(this.context.targetID,10)}),this._logClick(l.PHOTOALBUM)},_onFilesSelected:function(a){this.props.onFilesSelected(a,this.refs.fileInput.getFileInput()),b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())},_getCarouselPostButton:function(){if(!this.props.canUploadPhotos)return null;var a=h._("Create a Photo Carousel");this.props.carouselConfig&&this.props.carouselConfig.supportVideoCarousel&&(a=h._("Create a Photo\/Video Carousel"));var c=h._("Build a scrolling photo carousel with a link.");this._logImpression(l.CAROUSEL);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{onClick:this._onCarouselClick,className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.CAROUSEL,a,c)})},"carousel")},_onCarouselClick:function(){__p&&__p();b("ReactComposerPhotoCarouselActions").selectPhotoCarouselEntryPoint(this.context.composerID);if(!this.props.carouselConfig||!this.props.carouselConfig.ComposerPhotoCarouselUploadFirst)b("ReactComposerPhotoCarouselActions").showPhotoCarouselUrlEditArea(this.context.composerID);else{var a=b("XCarouselPageComposerPhotoUploadFirstController").getURIBuilder().setString("composer_id",this.context.composerID).setInt("target_id",parseInt(this.context.targetID,10)).getURI();a=b("ActorURI").create(a,this.context.targetID);a=new(b("AsyncRequest"))().setURI(a);a.send();b("ReactComposerPhotoCarouselActions").setPreviewIncompleted(this.context.composerID)}a={event:b("PagesComposerPostActionsLoggerEvent").CLICK_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10),composer_session_id:b("ComposerXSessionIDs").getSessionID(this.context.composerID)};b("PagesComposerActionsLogger").log(a);this._logClick(l.CAROUSEL)},_getSlideshowPostButton:function(){var a=this.props.slideshowConfig;if(!a)return null;var c=h._("Create Slideshow"),d=h._({"*":{"*":"Add {Minimum number of images} to {Maximum number of images} photos to create a video."}},[h._param("Minimum number of images",a?a.minPhotoNum:3,[0]),h._param("Maximum number of images",a?a.maxPhotoNum:7,[0])]);c=b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.SLIDESHOW,c,d)});this._logImpression(l.SLIDESHOW);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("ReactComposerSlideshowPostButtonContainer.react"),{className:"_3-8-",maxSelectedImages:a.maxPhotoNum,mediaAcceptParam:this.props.mediaAcceptParam.photos,pageID:a.pageID,showSlideshowNewDesign:a.showSlideshowNewDesign,onFilesSelected:this._onSlideshowFilesUpload,children:c})},"slideshow")},_onSlideshowFilesUpload:function(a,c){this.props.onFilesSelected(a,c),b("ReactComposerMediaUtils").clearInput(c),this._logClick(l.SLIDESHOW)},_getCanvasPostButton:function(){var a=j,c=h._("Now you can tell a more immersive story by combining images and videos.");this.props.canvasConfig&&this.props.canvasConfig.supportVideoCanvas&&(c=h._("Combine photos and videos into a fullscreen experience that opens instantly from your post."));this._logImpression(l.CANVAS);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("Link.react"),{"data-testid":"page-composer-share-canvas-link",onClick:this._onCanvasClick,className:"_3m1z _5xvh",children:this._renderPhotoPostOption(l.CANVAS,a,c)})},"canvas")},_onCanvasClick:function(){b("ReactComposerCanvasActions").showCanvasSelector(this.context.composerID);var a={event:b("PagesComposerPostActionsLoggerEvent").CLICK_CANVAS_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};b("PagesComposerActionsLogger").log(a);this._logClick(l.CANVAS)},_getCollectionPostButton:function(){var a=this.props.collectionConfig;if(!a)return null;var c=h._("Create a Collection"),d=h._("Feature a collection of items that open into a fullscreen mobile experience.");this._logImpression(l.COLLECTION);return b("React").jsx(k,{className:"_3m1y",children:b("React").jsx(b("ReactComposerCollectionPostButtonContainer.react"),{config:a,children:b("React").jsx(b("Link.react"),{className:"_3m1z _5xvh",onClick:this._onCollectionClick,children:this._renderPhotoPostOption(l.COLLECTION,c,d)})})},"collection")},_onCollectionClick:function(){var a={event:b("PagesComposerPostActionsLoggerEvent").CLICK_COLLECTION_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};b("PagesComposerActionsLogger").log(a);this._logClick(l.COLLECTION)},_renderPhotoPostOption:function(a,c,d){var e=null,f=null;if(a===l.CAROUSEL&&this.props.carouselConfig&&this.props.carouselConfig.showCarouselOptionSuperscript){var g=h._("NEW");e=b("React").jsx("sup",{className:"_9td",children:g})}a===l.MULTIPAGEPOST&&(f=b("React").jsx("div",{className:"_7bqz",children:b("React").jsx(b("Image.react"),{src:i("517122")})}));return b("React").jsxs(b("Grid.react"),{className:"_3m1-",cols:2,children:[b("React").jsx(k,{className:"_5xvi",children:b("React").jsx(b("Image.react"),{className:"_5xvj",src:this._getIconSource(a)})}),b("React").jsxs(k,{className:"_5xvk",children:[b("React").jsxs("div",{className:"_5xvl",children:[c,e,f]}),b("React").jsx("div",{className:"_5xvm",children:d})]})]})},_getIconSource:function(a){switch(a){case l.PHOTOVIDEO:return i("28660");case l.PHOTOALBUM:return i("28659");case l.CAROUSEL:return i("28656");case l.SLIDESHOW:return i("28661");case l.COLLECTION:return i("358650");case l.CANVAS:return i("28658");case l.MULTIPAGEPOST:return i("793855");default:return null}},_logImpression:function(a){return},_logClick:function(a){return},_getLoggingData:function(a){return babelHelpers["extends"]({},b("ComposerStructuredLoggerUtil").getLoggingBaseData(this.context.composerID),{event_data:{feature_type:a}})}});var l=Object.freeze({PHOTOVIDEO:"photo_video",PHOTOALBUM:"photo_album",CAROUSEL:"carousel",SLIDESHOW:"slideshow",CANVAS:"canvas",COLLECTION:"collection",MULTIPAGEPOST:"multi_page_post"});e.exports=c}),null);
__d("ReactComposerPhotoCarouselUrlInput.react",["cx","fbt","ix","CSS","Image.react","Keys","Locale","PagesComposerActionsLogger","PagesComposerPostActionsLoggerEvent","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactDOM","URLMatcher","URLScraper","XUICloseButton.react","XUITextInput.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoCarouselUrlInput",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{onChange:a.func.isRequired,onClickRemoveButton:a.func.isRequired,prefillURL:a.string},getInitialState:function(){return{disableArrow:!0}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.inputArea);a.focus();a instanceof Element&&b("CSS").addClass(a,"_47_s");a=this.props.prefillURL?this.props.prefillURL:"";a=!this._checkValidUrl(a);this.setState({disableArrow:a});b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").PREFILL_SCRAPE_URL,target_id:parseInt(this.context.targetID,10),prefill_scrape_url:this.props.prefillURL})},render:function(){var a=h._("Photo Carousel"),c=h._("Remove"),d=h._("Destination URL"),e=null,f=null,g=null,j=b("Locale").isRTL();j?(f=i("143154"),g=i("28654")):(f=i("143171"),g=i("28655"));this.state.disableArrow?e=b("React").jsx(b("Image.react"),{className:"_3ev6",size:"small",src:f,onClick:this._handleScrapeLink}):e=b("React").jsx(b("Image.react"),{className:"_3ev7",size:"small",src:g,onClick:this._handleScrapeLink});j=h._("Enter a URL");return b("React").jsxs("div",{className:"_d67",children:[b("React").jsxs("div",{className:"_d68",children:[b("React").jsx("div",{className:"_d69",children:a}),b("React").jsx(b("XUICloseButton.react"),{className:"_d6a",label:c,onClick:this.props.onClickRemoveButton,size:"medium"})]}),b("React").jsxs("div",{className:"_d6b",children:[b("React").jsxs("div",{className:"_px7",children:[b("React").jsx("span",{className:"_2do6",children:d}),b("React").jsx("div",{className:"_px8",children:b("React").jsx(b("XUITextInput.react"),{className:"_d6c",defaultValue:this.props.prefillURL,onBlur:this._onBlur,onChange:this._onChange,onKeyUp:this._handleKeyUp,placeholder:j,ref:"inputArea"})})]}),e]})]})},_handleScrapeLink:function(a){a=b("ReactDOM").findDOMNode(this.refs.inputArea);a=a.childNodes[0].value+"\n";this.setState({inputValue:a});this.props.onChange&&this.props.onChange(a)},_onBlur:function(a){a=b("ReactDOM").findDOMNode(this.refs.inputArea);a instanceof Element&&b("CSS").removeClass(a,"_47_s")},_onChange:function(a){this.setState({inputValue:a.target.value});this.props.onChange&&this.props.onChange(a.target.value);a=!this._checkValidUrl(a.target.value);this.setState({disableArrow:a});a=b("ReactDOM").findDOMNode(this.refs.inputArea);a instanceof Element&&b("CSS").removeClass(a,"_47_s")},_handleKeyUp:function(a){if(a.keyCode===b("Keys").RETURN){a=a.target.value+"\n";this.setState({inputValue:a});this.props.onChange&&this.props.onChange(a)}},_checkValidUrl:function(a){return b("URLScraper").match(a)||b("URLMatcher").permissiveMatch(a)}});e.exports=c}),null);
__d("ReactComposerPhotoCarouselUrlInputContainer.react",["PagesComposerActionsLogger","PagesComposerPostActionsLoggerEvent","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerPhotoCarouselActions","ReactComposerPhotoCarouselUrlInput.react","ReactComposerStatusUtils","URLScraper"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoCarouselUrlInputContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{prefillURL:a.string},render:function(){return b("React").jsx(b("ReactComposerPhotoCarouselUrlInput.react"),{onChange:this._onMentionsInputChange,onClickRemoveButton:this._onClickRemoveButton,prefillURL:this.props.prefillURL})},_onClickRemoveButton:function(){b("ReactComposerPhotoCarouselActions").hidePhotoCarouselUrlEditArea(this.context.composerID),b("PagesComposerActionsLogger").log({event:b("PagesComposerPostActionsLoggerEvent").REMOVE_PHOTO_CAROUSEL_URL_INPUT,target_id:parseInt(this.context.targetID,10)})},_onMentionsInputChange:function(a){b("URLScraper").trigger(a)||b("ReactComposerStatusUtils").scrapeLink(this.context.composerID,this.context.targetID,a,this.context.composerType,this.context.actorID,b("ReactComposerLoggingName").INLINE_COMPOSER)}});e.exports=c}),null);
__d("ReactComposerPhotoCarouselUtils",["fbt","React","ReactComposerPhotoCarouselStore"],(function(a,b,c,d,e,f,g){__p&&__p();a={getPhotoCarouselMediaContent:function(a,c){__p&&__p();var d=null;if(!a)return d;if(a.ComposerPhotoCarouselPlaceHolder){var e=a.ComposerPhotoCarouselPlaceHolder;d=b("React").jsx(e,{})}else{e=a.ComposerPhotoCarouselUrlInputContainer;d=b("React").jsx(e,{showUrlInputAreaNux:c.showUrlInputAreaNux,prefillURL:a.preFillURL})}return d},getInputPlaceHolder:function(a,b){var c=g._("Write something...");return b||!a||!a.ComposerPhotoCarouselPlaceHolder?c:g._("Enter a URL")},isPagePostButtonDisabled:function(a){if(!b("ReactComposerPhotoCarouselStore").isPhotoCarouselSelected(a))return!1;if(b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(a))return!0;return!b("ReactComposerPhotoCarouselStore").isCarouselPreviewCompleted(a)?!0:!1}};e.exports=a}),null);
__d("ReactComposerSlideshowThumbnailViewContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerSelectedImagesStore","ReactComposerSlideshowActions","ReactComposerSlideshowAudioStore","ReactComposerSlideshowDialogContainer.react","ReactComposerSlideshowStore","ReactFragment","SlideshowImageUtil","SlideshowPreview.react","SlideshowPreviewConstants","cxMargin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerSlideshowThumbnailViewContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerSlideshowAudioStore"),b("ReactComposerSlideshowStore"),b("ReactComposerSelectedImagesStore")),b("ReactComponentWithPureRenderMixin")],propTypes:{maxSelectedImages:a.number.isRequired,mediaAcceptParam:a.string.isRequired,pageID:a.string.isRequired,onFilesSelected:a.func.isRequired},statics:{calculateState:function(a,c){return{dialogShown:b("ReactComposerSlideshowStore").shouldShowSlideshowDialog(a),durationWithTransitionInMS:b("ReactComposerSlideshowStore").getDurationInMS(a),imagesAllLoaded:!b("ReactComposerMediaUploadStore").isUploading(a),imagesCrops:b("ReactComposerSelectedImagesStore").getImagesCrops(a),isPreviewPlaying:b("ReactComposerSlideshowAudioStore").getIsPreviewPlaying(a),selectedImages:b("ReactComposerSelectedImagesStore").getSelectedImages(a),selectedStorylineMood:b("ReactComposerSlideshowAudioStore").getSelectedStorylineMood(a),transitionInMS:b("ReactComposerSlideshowStore").getTransitionInMS(a)}}},_renderPreview:function(){var a=b("SlideshowPreviewConstants").WWW_PREVIEW_CONTAINER_SIZE_COMPOSER,c=b("SlideshowPreviewConstants").WWW_PLAYER_SIZE_COMPOSER,d=b("SlideshowImageUtil").getPreviewBoxDimensions(this.state.imagesCrops,c);d={marginBottom:(d.height-a)/2,marginLeft:b("SlideshowPreviewConstants").WWW_COMPOSER_LEFT_MARGIN,marginTop:(d.height-a)/2};return b("React").jsx("div",{className:"_3-95",style:{overflow:"hidden"},children:b("React").jsx(b("SlideshowPreview.react"),{durationWithTransitionInMS:this.state.durationWithTransitionInMS,hidden:!1,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,previewBoxContainerSize:a,previewBoxSize:c,showSlideshowImageCroppingEditOption:!1,selectedImages:this.state.selectedImages,storylineMoodIDSource:this.state.selectedStorylineMood?this.state.selectedStorylineMood.source:null,style:d,transitionInMS:this.state.transitionInMS,onClose:this._onXout,onEdit:this._onShowDialog,onPreviewStateChange:this._onPreviewStateChange})})},render:function(){return b("React").jsxs("div",{children:[this._renderPreview(),this.renderLayers()]})},renderLayers:function(){var a=null;this.state.dialogShown&&(a=b("React").jsx(b("ReactComposerSlideshowDialogContainer.react"),{dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,onCloseDialog:this._onCloseDialog,onFilesSelected:this.props.onFilesSelected}));return b("ReactFragment").create({dialog:a})},_onShowDialog:function(){b("ReactComposerSlideshowActions").showEditSlideshowDialog(this.context.composerID)},_onPreviewStateChange:function(a){b("ReactComposerSlideshowActions").previewStateChange(this.context.composerID,a)},_onXout:function(){var a=b("ReactComposerSelectedImagesStore").getNumberOfImages(this.context.composerID);b("ReactComposerMediaUploadActions").removeAllPhotoUploads(this.context.composerID,b("ReactComposerMediaUploadStore").getUploadsOfType(this.context.composerID,b("ReactComposerMediaUploadType").PHOTO));b("ReactComposerSlideshowActions").hideSlideshowEditField(this.context.composerID,a)},_onCloseDialog:function(){var a=this,c=b("ReactComposerSelectedImagesStore").getAddedUploadIDs(this.context.composerID);c.forEach(function(c){c=b("ReactComposerMediaUploadStore").getMediaUpload(a.context.composerID,c);b("ReactComposerMediaUploadActions").removePhotoAndPhotoUpload(a.context.composerID,c)});b("ReactComposerSlideshowActions").closeEditSlideshowDialog(this.context.composerID)}});e.exports=c}),null);
__d("ReactComposerPhotoTaggerButtonWithOptions.react",["cx","fbt","Bootloader","ComposerTargetData","Grid.react","LayerHideOnBlur","Link.react","React","ReactComponentWithPureRenderMixin","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerMediaFilePickerController.react","ReactComposerMediaUtils","ReactComposerPhotoCarouselActions","ReactComposerPhotoTaggerButton.react","ReactComposerSlideshowActions","ReactPagesComposerGlobalFlags","TooltipLink.react","XUIContextualDialog.react","XUIContextualDialogBody.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("Grid.react").GridItem;a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoTaggerButtonWithOptions",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{mediaAcceptParam:a.shape({videos:a.string,photos:a.string,both:a.string}).isRequired,disableFaceRecognition:a.bool.isRequired,onClick:a.func,photoLimit:a.number.isRequired,targetData:a.instanceOf(b("ComposerTargetData")).isRequired,hasData:a.bool,selected:a.bool,uploadSize:a.number,mediaConfig:a.object.isRequired},getDefaultProps:function(){return{hasData:!1,mediaAcceptParam:{},selected:!1}},getInitialState:function(){return{dialogShown:!1}},onLinkClick:function(){b("ReactPagesComposerGlobalFlags").getIsObjectiveFirstPagesComposer()&&b("Bootloader").loadModules(["PagesPublishingLoggingActions"],function(a){a.clickedTagger(b("ReactComposerLoggingName").MEDIA_TAGGER)},"ReactComposerPhotoTaggerButtonWithOptions.react"),this.setState({dialogShown:!this.state.dialogShown})},onToggle:function(a){a!==this.state.dialogShown&&this.setState({dialogShown:a})},render:function(){var a=this;if(this.props.uploadSize)return b("React").jsx(b("ReactComposerMediaFilePickerController.react"),babelHelpers["extends"]({},this.props,{loggingName:b("ReactComposerLoggingName").MEDIA_TAGGER,children:b("React").jsx(b("ReactComposerPhotoTaggerButton.react"),babelHelpers["extends"]({},this.props))}));var c=b("joinClasses")("_2vwi _lnh"+(this.props.hasData?" _6xe":"")+(this.state.dialogShown?" _50hx":""),this.props.className),d=this.props.photoLimit>1?h._("Add photos to your post"):h._("Add a photo to your post"),e=h._("Create a Photo Carousel"),f=h._("Upload Photos\/Video"),g=h._("Create a Slideshow");g=b("React").jsx(b("XUIContextualDialog.react"),{autoFocus:!1,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur")},contextRef:function(){return a.refs.cameraIcon},offsetY:10,onToggle:this.onToggle,position:"above",shown:this.state.dialogShown,children:b("React").jsx(b("XUIContextualDialogBody.react"),{children:b("React").jsxs(b("Grid.react"),{cols:1,spacing:"_2phz",children:[b("React").jsx(i,{children:b("React").jsx(b("Link.react"),{className:"_3fpv",onClick:this._onSlideshowCreationClicked,children:g})}),b("React").jsx(i,{children:b("React").jsx(b("Link.react"),{className:"_3fpv",onClick:this._onCarouselCreationClicked,children:e})}),b("React").jsx(i,{children:b("React").jsx(b("ReactComposerMediaFilePickerController.react"),babelHelpers["extends"]({},this.props,{loggingName:b("ReactComposerLoggingName").MEDIA_TAGGER,children:b("React").jsx(b("Link.react"),{className:"_3fpv",onClick:this._onSelect,children:f})}))})]})})});return b("React").jsxs("div",{className:"_3xem _3xen",ref:"cameraIcon",children:[b("React").jsx(b("TooltipLink.react"),{className:c,onClick:this.onLinkClick,tooltip:d,children:b("React").jsx("span",{className:"accessible_elem",children:this.props.photoLimit>1?h._("Add photos"):h._("Add photo")})}),g]})},_onFilesSelected:function(a){this.props.onFilesSelected(a,this.refs.fileInput.getFileInput()),b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())},_onCarouselCreationClicked:function(a){b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").MEDIA,!0),b("ReactComposerPhotoCarouselActions").showPhotoCarouselUrlEditArea(this.context.composerID,"carousel_camera_icon",this.context.targetID)},_onSlideshowCreationClicked:function(a){b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").MEDIA,!0),b("ReactComposerSlideshowActions").showSlideshowDialog(this.context.composerID,"composer_camera_icon")}});e.exports=c}),null);